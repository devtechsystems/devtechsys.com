<<<<<<< HEAD
{"version":3,"sources":["assets/js/projects/ColumnNames.js","assets/js/projects/components/BreakdownPanel/PieChart.js","assets/js/projects/components/BreakdownPanel/RowChart/DefaultRow.js","assets/js/projects/components/BreakdownPanel/RowChart/RowChart.js","assets/js/projects/components/BreakdownPanel/RowChart/index.js","assets/js/projects/components/BreakdownPanel/index.js","assets/js/projects/components/D3Choropleth.js","assets/js/projects/components/ProjectSearch/PageSelector.js","assets/js/projects/components/ProjectSearch/ProjectSearch.js","assets/js/projects/components/ProjectSearch/SearchFields.js","assets/js/projects/components/ProjectSearch/index.js","assets/js/projects/components/StackedBarChart.js","assets/js/projects/entry.js","assets/js/projects/test/Data.js","assets/js/projects/util/ColorPalette.js","assets/js/projects/util/ColorScale.js","assets/js/projects/util/Humanify.js","assets/js/projects/util/PracticeAreaExists.js","assets/js/projects/util/Reduce.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnCA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxOA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArIA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3FA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzRA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7ZA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzOA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3PA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnFA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3CA;AAAA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"assets/brunch-compiled/projects-bundle.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ISO_3_COlUMN_NAME = exports.SEARCH_REFERENCE_ID_COLUMN_NAME = exports.CONTRACT_VALUE_COLUMN_NAME = exports.PARTNER_COLUMN_NAME = exports.REGION_COLUMN_NAME = exports.ID_COLUMN_NAME = exports.PROJECT_TITLE_COLUMN_NAME = exports.COUNTRY_COLUMN_NAME = exports.PRACTICE_AREA_COLUMN_NAMES = exports.PRACTICE_AREA_COLUMN_NAME = undefined;\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ENUMERATED_COLUMN_NAMES = JEKYLL_DATA.enumeratedColumnNames;\nvar PRACTICE_AREA_COLUMN_NAMES = JEKYLL_DATA.enumeratedPracticeAreas;\nvar COUNTRY_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['COUNTRY'];\nvar REGION_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['REGION'];\nvar PARTNER_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['PARTNER'];\nvar PROJECT_TITLE_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['PROJECT_TITLE'];\nvar CONTRACT_VALUE_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['CONTRACT_VALUE'];\nvar ID_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['DATA_ID'];\nvar PRACTICE_AREA_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['PRACTICE_AREA'];\nvar SEARCH_REFERENCE_ID_COLUMN_NAME = 'search_ref_id';\nvar ISO_3_COlUMN_NAME = ENUMERATED_COLUMN_NAMES['ISO3_CODE'];\n\nexports.PRACTICE_AREA_COLUMN_NAME = PRACTICE_AREA_COLUMN_NAME;\nexports.PRACTICE_AREA_COLUMN_NAMES = PRACTICE_AREA_COLUMN_NAMES;\nexports.COUNTRY_COLUMN_NAME = COUNTRY_COLUMN_NAME;\nexports.PROJECT_TITLE_COLUMN_NAME = PROJECT_TITLE_COLUMN_NAME;\nexports.ID_COLUMN_NAME = ID_COLUMN_NAME;\nexports.REGION_COLUMN_NAME = REGION_COLUMN_NAME;\nexports.PARTNER_COLUMN_NAME = PARTNER_COLUMN_NAME;\nexports.CONTRACT_VALUE_COLUMN_NAME = CONTRACT_VALUE_COLUMN_NAME;\nexports.SEARCH_REFERENCE_ID_COLUMN_NAME = SEARCH_REFERENCE_ID_COLUMN_NAME;\nexports.ISO_3_COlUMN_NAME = ISO_3_COlUMN_NAME;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (_ref2) {\n  var width = _ref2.width,\n      height = _ref2.height,\n      data = _ref2.data,\n      title = _ref2.title,\n      colorScale = _ref2.colorScale;\n\n  var outerRadius = width > height ? height / 2 : width / 2;\n  var innerRadius = outerRadius * .4;\n  return _react2.default.createElement(\n    _recharts.PieChart,\n    { width: width, height: height, className: 'breakdown-pie' },\n    _react2.default.createElement(_recharts.Tooltip, { content: _react2.default.createElement(TooltipContent, { valueName: title }) }),\n    _react2.default.createElement(\n      _recharts.Pie,\n      {\n        dataKey: 'value',\n        data: data,\n        innerRadius: innerRadius,\n        outerRadius: outerRadius,\n        cx: '50%',\n        cy: '50%',\n        startAngle: 90,\n        endAngle: -270\n      },\n      data.map(function (element, index) {\n        return _react2.default.createElement(_recharts.Cell, { key: element.name, fill: colorScale.getColorFor(data[index].value) });\n      })\n    )\n  );\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _recharts = require('recharts');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TooltipContent = function TooltipContent(_ref) {\n  var active = _ref.active,\n      type = _ref.type,\n      payload = _ref.payload,\n      label = _ref.label,\n      valueName = _ref.valueName;\n\n  if (!active) return null;\n  var hoverData = payload[0].payload;\n  return _react2.default.createElement(\n    'div',\n    { className: 'tt-content', style: { width: 200, height: 'auto' } },\n    _react2.default.createElement(\n      'div',\n      { className: 'tt-label' },\n      hoverData.name\n    ),\n    hoverData.value,\n    ' ',\n    valueName\n  );\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _d = require('d3');\n\nvar _d2 = _interopRequireDefault(_d);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultNameRenderer = function defaultNameRenderer(name, x, y, fontSize, refFunc, onRowClick) {\n  return _react2.default.createElement(\n    'text',\n    {\n      ref: refFunc,\n      className: 'rad-row-name-text',\n      x: x,\n      y: y,\n      fontSize: fontSize,\n      alignmentBaseline: 'hanging',\n      onClick: function onClick() {\n        onRowClick(name);\n      }\n    },\n    _react2.default.createElement(\n      'title',\n      null,\n      name\n    ),\n    name\n  );\n};\n\nvar RadRow = function (_Component) {\n  _inherits(RadRow, _Component);\n\n  function RadRow(props) {\n    _classCallCheck(this, RadRow);\n\n    var _this = _possibleConstructorReturn(this, (RadRow.__proto__ || Object.getPrototypeOf(RadRow)).call(this, props));\n\n    _this.state = {\n      showEllipses: false\n    };\n    return _this;\n  }\n\n  _createClass(RadRow, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var textWidth = this.nameTextElement.getBoundingClientRect().width;\n      if (textWidth > this.availableWidthForName() && !this.state.showEllipses) {\n        this.setState({ showEllipses: true });\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      var textWidth = this.nameTextElement.getBoundingClientRect().width;\n      if (textWidth > this.availableWidthForName() && !this.state.showEllipses) {\n        this.setState({ showEllipses: true });\n      } else if (textWidth < this.availableWidthForName() && this.state.showEllipses) {\n        this.setState({ showEllipses: false });\n      }\n    }\n  }, {\n    key: 'availableWidthForName',\n    value: function availableWidthForName() {\n      return this.props.chartWidth - 53 - this.widthForCircle();\n    }\n  }, {\n    key: 'widthForCircle',\n    value: function widthForCircle() {\n      return this.getCircleRadius() * 2 + this.props.circlePaddingRight;\n    }\n  }, {\n    key: 'heightForText',\n    value: function heightForText() {\n      return this.props.rowHeight / 3;\n    }\n  }, {\n    key: 'getCircleRadius',\n    value: function getCircleRadius() {\n      return this.heightForText() / 2;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          y = _props.y,\n          rowHeight = _props.rowHeight,\n          chartWidth = _props.chartWidth,\n          datum = _props.datum,\n          data = _props.data,\n          xScale = _props.xScale,\n          nameRenderer = _props.nameRenderer,\n          onRowClick = _props.onRowClick;\n\n      var barWidth = void 0;\n      var textValueClassNames = (0, _classnames2.default)('rad-row-value-text', { 'rad-row-negative': datum.value < 0 });\n      if (datum.value < 0) {\n        barWidth = 0;\n      } else {\n        barWidth = xScale(datum.value);\n      }\n      var barHeight = rowHeight / 6;\n      var fontSize = this.heightForText();\n      var circleRadius = this.getCircleRadius();\n      var barY = y + rowHeight / 3 + rowHeight / 6;\n      var ellipsesXAdjustment = 2; // Move ellipsis slightly right so it has padding\n      var ellipses = this.state.showEllipses ? _react2.default.createElement(\n        'text',\n        {\n          className: 'rad-row-name-ellipses',\n          x: chartWidth - this.props.spaceForValueText + ellipsesXAdjustment,\n          y: y,\n          fontSize: fontSize,\n          alignmentBaseline: 'hanging'\n        },\n        _react2.default.createElement(\n          'title',\n          null,\n          datum.name\n        ),\n        '...'\n      ) : '';\n\n      return _react2.default.createElement(\n        'g',\n        { className: 'rad-row' },\n        _react2.default.createElement('circle', {\n          cx: 0 + circleRadius,\n          cy: y + circleRadius,\n          r: circleRadius,\n          fill: this.props.color\n        }),\n        nameRenderer(datum.name, this.widthForCircle(), y, fontSize, function (textElement) {\n          _this2.nameTextElement = textElement;\n        }, onRowClick),\n        _react2.default.createElement('rect', {\n          className: 'rad-row-value-background',\n          x: chartWidth - this.props.spaceForValueText,\n          y: y,\n          width: this.props.spaceForValueText,\n          height: rowHeight - barHeight\n        }),\n        ellipses,\n        _react2.default.createElement(\n          'text',\n          {\n            className: textValueClassNames,\n            x: chartWidth,\n            y: y,\n            fontSize: fontSize,\n            textAnchor: 'end',\n            alignmentBaseline: 'hanging'\n          },\n          datum.value\n        ),\n        _react2.default.createElement('rect', {\n          className: 'rad-row-background',\n          y: barY,\n          width: chartWidth,\n          height: barHeight\n        }),\n        _react2.default.createElement('rect', {\n          className: 'rad-row-bar',\n          y: barY,\n          width: barWidth,\n          height: barHeight,\n          fill: this.props.color\n        })\n      );\n    }\n  }]);\n\n  return RadRow;\n}(_react.Component);\n\nexports.default = RadRow;\n\n\nRadRow.propTypes = {\n  y: _propTypes2.default.number,\n  chartWidth: _propTypes2.default.number,\n  rowHeight: _propTypes2.default.number,\n  datum: _propTypes2.default.shape({\n    name: _propTypes2.default.string,\n    value: _propTypes2.default.number\n  }),\n  data: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n    name: _propTypes2.default.string,\n    value: _propTypes2.default.number\n  })),\n  xScale: _propTypes2.default.func,\n  color: _propTypes2.default.string,\n  nameRenderer: _propTypes2.default.func,\n  onRowClick: _propTypes2.default.func\n};\n\nRadRow.defaultProps = {\n  circlePaddingRight: 8,\n  spaceForValueText: 54,\n  nameRenderer: defaultNameRenderer,\n  onRowClick: function onRowClick() {\n    console.log('row clicked');\n  }\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _d = require('d3');\n\nvar _d2 = _interopRequireDefault(_d);\n\nvar _DefaultRow = require('./DefaultRow.js');\n\nvar _DefaultRow2 = _interopRequireDefault(_DefaultRow);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar RowChart = function (_Component) {\n  _inherits(RowChart, _Component);\n\n  function RowChart() {\n    _classCallCheck(this, RowChart);\n\n    return _possibleConstructorReturn(this, (RowChart.__proto__ || Object.getPrototypeOf(RowChart)).apply(this, arguments));\n  }\n\n  _createClass(RowChart, [{\n    key: 'rowHeight',\n    value: function rowHeight() {\n      if (this.props.rowHeight) return this.props.rowHeight;\n\n      return this.props.height / this.props.data.length;\n    }\n  }, {\n    key: 'svgHeight',\n    value: function svgHeight() {\n      return this.rowHeight() * this.props.data.length;\n    }\n  }, {\n    key: 'svgWidth',\n    value: function svgWidth() {\n      var scrollbarWidth = 18;\n      if (this.svgHeight() >= this.props.height) return this.props.width - scrollbarWidth;\n\n      return this.props.width;\n    }\n  }, {\n    key: 'xScale',\n    value: function xScale() {\n      var maxValue = _d2.default.max(this.props.data, function (d) {\n        return d.value;\n      });\n      return _d2.default.scale.linear().domain([0, maxValue]).range([0, this.props.width]);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var rowHeight = this.rowHeight();\n      var rows = this.props.data.map(function (d, i) {\n        var y = rowHeight * i;\n        var Row = _this2.props.row;\n        return _react2.default.createElement(Row, {\n          key: d.name,\n          y: y,\n          rowHeight: rowHeight,\n          chartWidth: _this2.svgWidth(),\n          datum: d,\n          data: _this2.props.data,\n          xScale: _this2.xScale(),\n          color: _this2.props.colorMapper(d.value),\n          nameRenderer: _this2.props.nameRenderer,\n          onRowClick: _this2.props.onRowClick\n        });\n      });\n\n      var containerStyles = {\n        width: this.props.width,\n        height: this.props.height,\n        overflow: 'auto'\n      };\n      return _react2.default.createElement(\n        'div',\n        { className: 'row-chart ' + (this.props.className || ''), style: containerStyles },\n        _react2.default.createElement(\n          'svg',\n          { width: this.svgWidth(), height: this.svgHeight() },\n          rows\n        )\n      );\n    }\n  }]);\n\n  return RowChart;\n}(_react.Component);\n\nexports.default = RowChart;\n\n\nRowChart.propTypes = {\n  className: _propTypes2.default.string,\n  width: _propTypes2.default.number,\n  height: _propTypes2.default.number,\n  data: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n    name: _propTypes2.default.string,\n    value: _propTypes2.default.number\n  })),\n  row: _propTypes2.default.func,\n  rowHeight: _propTypes2.default.number,\n  colorMapper: _propTypes2.default.func,\n  nameRenderer: _propTypes2.default.func,\n  onRowClick: _propTypes2.default.func\n};\n\nRowChart.defaultProps = {\n  row: _DefaultRow2.default\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _RowChart = require('./RowChart');\n\nObject.defineProperty(exports, 'default', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_RowChart).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (_ref) {\n  var data = _ref.data,\n      bigNumber = _ref.bigNumber,\n      colorPalette = _ref.colorPalette,\n      title = _ref.title,\n      groupTitle = _ref.groupTitle,\n      valueTitle = _ref.valueTitle,\n      onRowClick = _ref.onRowClick,\n      className = _ref.className;\n\n  var colorScale = new _ColorScale2.default(data, colorPalette.colors, colorPalette.noDataColor);\n\n  return _react2.default.createElement(\n    'div',\n    { className: 'breakdown-panel row ' + className },\n    _react2.default.createElement(\n      'div',\n      { className: 'left-column column medium-5' },\n      _react2.default.createElement(_reactCountup2.default, { className: 'number-countup', start: 0, end: bigNumber, duration: 3 }),\n      _react2.default.createElement(\n        'div',\n        { className: 'breakdown-title' },\n        title\n      ),\n      _react2.default.createElement(\n        _reactSizebox2.default,\n        { className: 'pie-sizebox' },\n        _react2.default.createElement(_PieChart2.default, { data: data, title: title, colorScale: colorScale })\n      )\n    ),\n    _react2.default.createElement(\n      'div',\n      { className: 'right-column column medium-10' },\n      _react2.default.createElement(\n        'div',\n        { className: 'breakdown-group-title' },\n        'By ',\n        groupTitle\n      ),\n      _react2.default.createElement(\n        'div',\n        { className: 'breakdown-value-title' },\n        valueTitle\n      ),\n      _react2.default.createElement(\n        _reactSizebox2.default,\n        { className: 'row-chart-sizebox' },\n        _react2.default.createElement(_RowChart2.default, {\n          rowHeight: 40,\n          data: data,\n          colorMapper: function colorMapper(value) {\n            return colorScale.getColorFor(value);\n          },\n          onRowClick: onRowClick\n        })\n      )\n    )\n  );\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _RowChart = require('./RowChart');\n\nvar _RowChart2 = _interopRequireDefault(_RowChart);\n\nvar _ColorScale = require('../../util/ColorScale.js');\n\nvar _ColorScale2 = _interopRequireDefault(_ColorScale);\n\nvar _reactCountup = require('react-countup');\n\nvar _reactCountup2 = _interopRequireDefault(_reactCountup);\n\nvar _reactSizebox = require('react-sizebox');\n\nvar _reactSizebox2 = _interopRequireDefault(_reactSizebox);\n\nvar _PieChart = require('./PieChart');\n\nvar _PieChart2 = _interopRequireDefault(_PieChart);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (parentSelector) {\n  var chart = {};\n\n  d3.select(window).on(\"resize\", throttle);\n\n  var zoom = d3.behavior.zoom().scaleExtent([1, 9]).on(\"zoom\", zoomAndPan);\n\n  var width = document.getElementById('projects-choropleth').offsetWidth;\n  var parentHeight = document.getElementById('projects-choropleth').offsetHeight;\n  var height = width / 2;\n  var center = [width / 2, height / 2];\n\n  var projection, path, svg, g;\n  var _topojson = void 0,\n      _data = void 0,\n      _colorScale = void 0;\n  var _colorPalette = { colors: ['green', 'red', 'blue'], noDataColor: '#bbb' };\n  var _colorMapper = function _colorMapper(value) {\n    return '#ccc';\n  };\n  var _valueAccessor = function _valueAccessor(datum) {\n    return datum !== undefined ? datum.value : undefined;\n  };\n  var _tooltipContent = function _tooltipContent(datum) {\n    return datum.name + \"<br/>\" + datum.value;\n  };\n  var _numberFormatter = function _numberFormatter(value) {\n    return Math.round(value);\n  };\n\n  var tooltip = d3.select(\"#projects-choropleth\").append(\"div\").attr(\"class\", \"tooltip hidden\");\n\n  setup(width, height);\n\n  function setup(width, height) {\n    projection = d3.geo.mercator().translate([width / 2, height / 2]).scale(width / 2 / Math.PI);\n\n    path = d3.geo.path().projection(projection);\n\n    svg = d3.select(\"#projects-choropleth\").append(\"svg\").attr(\"width\", width).attr(\"height\", height).call(zoom).on(\"wheel.zoom\", null) // Don't zoom with mouse scroll\n    //.on(\"click\", click)\n    .append(\"g\");\n\n    g = svg.append(\"g\").on(\"click\", click);\n  }\n\n  function setupColorMapper() {\n    _colorScale = new _ColorScale2.default(_data, _colorPalette.colors, _colorPalette.noDataColor);\n    _colorMapper = function _colorMapper(value) {\n      return _colorScale.getColorFor(value);\n    };\n  }\n\n  function addLegend() {\n    var legendBottomOffset = height - parentHeight > 0 ? parentHeight - 200 : height - 200;\n    var legend = svg.append('g').classed('legend', true).attr('transform', \"translate(\" + 20 + \", \" + legendBottomOffset + \")\");\n    legend.append('rect').classed('background', true).attr('width', 170).attr('height', 180).attr('fill', 'white');\n\n    legend.append('text').classed('legend-title', true).text('Legend').attr('alignment-baseline', 'hanging').attr('y', 10).attr('x', 10);\n\n    var keyContainer = legend.append('g').classed('key-container', true).attr('transform', \"translate(\" + 10 + \", 35)\");\n\n    var legendColors = _colorScale.scale.range().slice(0).reverse();\n    legendColors.push(_colorScale.noDataColor);\n    var keyRow = keyContainer.selectAll('g').data(legendColors).enter().append('g').attr('transform', function (d, i) {\n      return \"translate(\" + 0 + \", \" + i * 20 + \")\";\n    });\n\n    keyRow.append('rect').attr('x', 0).attr('y', 0).attr('height', 15).attr('width', 15).attr('fill', function (color) {\n      return color;\n    });\n\n    keyRow.append('text').text(function (color) {\n      return getLegendValueRange(color);\n    }).classed('key-text', true).attr('alignment-baseline', 'hanging').attr('x', 25).attr('y', 0);\n  }\n\n  function getLegendValueRange(color) {\n    var colorValueRange = _colorScale.scale.invertExtent;\n    if (!colorValueRange(color)[0]) return '0 Solutions';\n    return _numberFormatter(Math.ceil(colorValueRange(color)[0])) + \" to \" + _numberFormatter(Math.floor(colorValueRange(color)[1])) + \" Solutions\";\n  }\n\n  chart.numberFormatter = function (_) {\n    _numberFormatter = _;\n    return chart;\n  };\n\n  chart.colorPalette = function (_) {\n    _colorPalette = _;\n    if (_data !== undefined) setupColorMapper();\n    return chart;\n  };\n\n  chart.topojson = function (_) {\n    _topojson = _;\n    return chart;\n  };\n\n  chart.data = function (_) {\n    _data = _;\n    return chart;\n  };\n\n  chart.tooltipContent = function (_) {\n    _tooltipContent = _;\n    return chart;\n  };\n\n  function getDatum(key) {\n    var datum = _data.find(function (d) {\n      return d.name === key;\n    });\n    if (!datum) {\n      var geoDatum = _topojson.find(function (d) {\n        return d.id === key;\n      });\n      if (!geoDatum) {\n        return { noDataFound: true, noGeoDataFound: true, name: key };\n      }\n      return Object.assign({ noDataFound: true }, { geoData: geoDatum });\n    }\n    return Object.assign(datum, { geoData: _topojson.find(function (d) {\n        return d.id === key;\n      }) });\n  }\n\n  function getDataValue(key) {\n    return _valueAccessor(getDatum(key));\n  }\n\n  chart.draw = function () {\n    setupColorMapper();\n    addLegend();\n    var country = g.selectAll(\".country\").data(_topojson);\n\n    country.enter().insert(\"path\").attr(\"class\", \"country\").attr(\"d\", path).attr(\"id\", function (d, i) {\n      return d.id;\n    }).attr(\"title\", function (d, i) {\n      return d.properties.name;\n    }).style(\"fill\", function (d, i) {\n      return _colorMapper(getDataValue(d.id));\n    });\n    d3.selectAll(\".country\").style(\"stroke-width\", .5 / zoom.scale());\n\n    //offsets for tooltips\n    var offsetL = document.getElementById('projects-choropleth').offsetLeft + 20;\n    var offsetT = document.getElementById('projects-choropleth').offsetTop + 10;\n\n    //tooltips\n    country.on(\"mousemove\", function (d, i) {\n\n      var mouse = d3.mouse(svg.node()).map(function (d) {\n        return parseInt(d);\n      });\n\n      tooltip.classed(\"hidden\", false).attr(\"style\", \"left:\" + (mouse[0] + offsetL) + \"px;top:\" + (mouse[1] + offsetT) + \"px\").html(_tooltipContent(getDatum(d.id)));\n    }).on(\"mouseout\", function (d, i) {\n      tooltip.classed(\"hidden\", true);\n    });\n  };\n\n  function redraw() {\n    width = document.getElementById('projects-choropleth').offsetWidth;\n    height = width / 2;\n    d3.select('svg').remove();\n    setup(width, height);\n    chart.draw(_topojson);\n  }\n\n  function zoomAndPan(zoomFromButton) {\n    if (!zoomFromButton) {\n      var t = d3.event.translate;\n      var s = d3.event.scale;\n      var h = height / 4;\n\n      t[0] = Math.min(width / height * (s - 1), Math.max(width * (1 - s), t[0]));\n\n      t[1] = Math.min(h * (s - 1) + h * s, Math.max(height * (1 - s) - h * s, t[1]));\n\n      zoom.translate(t);\n      g.attr(\"transform\", \"translate(\" + t + \")scale(\" + s + \")\");\n    }\n\n    g.attr(\"transform\", \"translate(\" + zoom.translate() + \")scale(\" + zoom.scale() + \")\");\n    //adjust the country hover stroke width based on zoom level\n    d3.selectAll(\".country\").style(\"stroke-width\", .5 / zoom.scale());\n  }\n\n  var throttleTimer;\n  function throttle() {\n    window.clearTimeout(throttleTimer);\n    throttleTimer = window.setTimeout(function () {\n      redraw();\n    }, 200);\n  }\n\n  //geo translation on mouse click in map\n  function click() {\n    var latlon = projection.invert(d3.mouse(this));\n  }\n\n  //function to add points and text to the map (used in plotting capitals)\n  function addpoint(lon, lat, text) {\n\n    var gpoint = g.append(\"g\").attr(\"class\", \"gpoint\");\n    var x = projection([lon, lat])[0];\n    var y = projection([lon, lat])[1];\n\n    gpoint.append(\"svg:circle\").attr(\"cx\", x).attr(\"cy\", y).attr(\"class\", \"point\").attr(\"r\", 1.5);\n\n    //conditional in case a point has no associated text\n    if (text.length > 0) {\n\n      gpoint.append(\"text\").attr(\"x\", x + 2).attr(\"y\", y + 2).attr(\"class\", \"text\").text(text);\n    }\n  }\n\n  // ZOOM BUTTON LOGIC ***********\n  function interpolateZoom(translate, scale) {\n    var self = this;\n    return d3.transition().duration(350).tween(\"zoom\", function () {\n      var iTranslate = d3.interpolate(zoom.translate(), translate),\n          iScale = d3.interpolate(zoom.scale(), scale);\n      return function (t) {\n        zoom.scale(iScale(t)).translate(iTranslate(t));\n        zoomAndPan(true);\n      };\n    });\n  }\n\n  function zoomClick() {\n    var clicked = d3.event.target,\n        direction = 1,\n        factor = 0.2,\n        target_zoom = 1,\n        center = [width / 2, height / 2],\n        extent = zoom.scaleExtent(),\n        translate = zoom.translate(),\n        translate0 = [],\n        l = [],\n        view = { x: translate[0], y: translate[1], k: zoom.scale() };\n\n    d3.event.preventDefault();\n    direction = this.id === 'zoom-in' ? 1 : -1;\n    target_zoom = zoom.scale() * (1 + factor * direction);\n\n    if (target_zoom < extent[0] || target_zoom > extent[1]) {\n      return false;\n    }\n\n    translate0 = [(center[0] - view.x) / view.k, (center[1] - view.y) / view.k];\n    view.k = target_zoom;\n    l = [translate0[0] * view.k + view.x, translate0[1] * view.k + view.y];\n\n    view.x += center[0] - l[0];\n    view.y += center[1] - l[1];\n\n    interpolateZoom([view.x, view.y], view.k);\n  }\n\n  function resetZoom() {\n    interpolateZoom([0, 0], 1);\n  }\n\n  d3.selectAll('#projects-choropleth .zoom-button').on('click', zoomClick);\n  d3.select('#projects-choropleth .reset-button').on('click', resetZoom);\n  return chart;\n};\n\nvar _ColorScale = require(\"../util/ColorScale\");\n\nvar _ColorScale2 = _interopRequireDefault(_ColorScale);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (_ref) {\n  var currentPage = _ref.currentPage,\n      totalPages = _ref.totalPages,\n      onPrevious = _ref.onPrevious,\n      onNext = _ref.onNext;\n\n  return _react2.default.createElement(\n    \"div\",\n    { className: \"page-selector column small-8 medium-6 large-6\" },\n    _react2.default.createElement(\n      \"div\",\n      { className: \"row\" },\n      _react2.default.createElement(\n        \"div\",\n        { className: \"page-prev-button column small-4\", onClick: onPrevious },\n        _react2.default.createElement(\"span\", { className: \"fa fa-angle-left\" })\n      ),\n      _react2.default.createElement(\n        \"div\",\n        { className: \"current-page column small-8\" },\n        currentPage,\n        \" of \",\n        totalPages\n      ),\n      _react2.default.createElement(\n        \"div\",\n        { className: \"page-next-button column small-4\", onClick: onNext },\n        _react2.default.createElement(\"span\", { className: \"fa fa-angle-right\" })\n      )\n    )\n  );\n};\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _lunr = require('lunr');\n\nvar _lunr2 = _interopRequireDefault(_lunr);\n\nvar _PageSelector = require('./PageSelector');\n\nvar _PageSelector2 = _interopRequireDefault(_PageSelector);\n\nvar _SearchFields = require('./SearchFields');\n\nvar _ColumnNames = require('../../ColumnNames');\n\nvar _PracticeAreaExists = require('../../util/PracticeAreaExists');\n\nvar _PracticeAreaExists2 = _interopRequireDefault(_PracticeAreaExists);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ProjectSearch = function (_Component) {\n  _inherits(ProjectSearch, _Component);\n\n  function ProjectSearch(props) {\n    _classCallCheck(this, ProjectSearch);\n\n    var _this = _possibleConstructorReturn(this, (ProjectSearch.__proto__ || Object.getPrototypeOf(ProjectSearch)).call(this, props));\n\n    _this.state = {\n      searchInput: '',\n      totalResults: [],\n      pagedResults: [],\n      currentPage: 1,\n      totalNumberOfPages: 0,\n      sortBy: { columnName: 'Project Title', order: 'asc' }\n    };\n\n    _this.searchIndex = (0, _lunr2.default)(function () {\n      var _this2 = this;\n\n      this.ref(props.searchReferenceField);\n      Object.values(props.searchFields).forEach(function (searchField) {\n        var fieldName = searchField.name;\n        var fieldWeight = searchField.weight;\n        _this2.field(fieldName, fieldWeight);\n      });\n      this.pipeline.remove(_lunr2.default.stemmer);\n\n      props.projects.forEach(function (project) {\n        _this2.add(project);\n      });\n    });\n\n    // Give 'this' scope to functions\n    _this.handleChange = _this.handleChange.bind(_this);\n    _this.getTotalResults = _this.getTotalResults.bind(_this);\n    _this.getPagedData = _this.getPagedData.bind(_this);\n    _this.goToNextPage = _this.goToNextPage.bind(_this);\n    _this.goToPreviousPage = _this.goToPreviousPage.bind(_this);\n    _this.getTotalNumberOfPages = _this.getTotalNumberOfPages.bind(_this);\n    _this.setSort = _this.setSort.bind(_this);\n    return _this;\n  }\n\n  _createClass(ProjectSearch, [{\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      var totalResults = this.getTotalResults(this.state.searchInput, this.state.sortBy);\n      var pagedResults = this.getPagedData(totalResults, this.state.currentPage);\n      // Set the initial results set\n      this.setState({\n        totalResults: totalResults,\n        pagedResults: pagedResults,\n        totalNumberOfPages: this.getTotalNumberOfPages(totalResults, this.props.showCount)\n      });\n    }\n  }, {\n    key: 'getPracticeAreasMarkup',\n    value: function getPracticeAreasMarkup(record) {\n      var practiceAreaObjects = Object.values(_ColumnNames.PRACTICE_AREA_COLUMN_NAMES).map(function (pa) {\n        return pa;\n      });\n      var practiceAreasForProject = practiceAreaObjects.filter(function (pa) {\n        return (0, _PracticeAreaExists2.default)(pa, record);\n      });\n      var markup = practiceAreasForProject.map(function (practiceArea, i) {\n        var separator = i + 1 < practiceAreasForProject.length ? ' / ' : '';\n\n        return _react2.default.createElement(\n          'span',\n          { key: practiceArea['key'], className: 'subtitle' },\n          '' + practiceArea['displayName'] + separator\n        );\n      });\n\n      if (markup.length === 0) return _react2.default.createElement(\n        'span',\n        null,\n        'Practice Area Unavailable'\n      );\n      return markup;\n    }\n  }, {\n    key: 'getPagedData',\n    value: function getPagedData(data, pageNumber) {\n      if (data.length <= this.props.showCount) {\n        return data;\n      }\n\n      var zeroedPageIndex = pageNumber - 1;\n      var startIndex = this.props.showCount * zeroedPageIndex;\n      var endIndex = startIndex + this.props.showCount;\n      return data.slice(startIndex, endIndex);\n    }\n\n    // Note this function is for sorting strings\n\n  }, {\n    key: 'generateSortFunc',\n    value: function generateSortFunc(sortColumn, sortOrder) {\n      if (sortOrder == 'asc') {\n        return function (a, b) {\n          return a[sortColumn].localeCompare(b[sortColumn]);\n        };\n      } else {\n        return function (a, b) {\n          return b[sortColumn].localeCompare(a[sortColumn]);\n        };\n      }\n    }\n  }, {\n    key: 'getTotalResults',\n    value: function getTotalResults(searchInput, sortBy) {\n      var _this3 = this;\n\n      var resultsRefs = this.searchIndex.search('*' + searchInput + '*').map(function (result) {\n        return result.ref;\n      });\n      var resultsRecords = resultsRefs.map(function (ref) {\n        return _this3.props.projects.find(function (project) {\n          return project[_this3.props.searchReferenceField] === Number(ref);\n        });\n      }).sort(this.generateSortFunc(sortBy.columnName, sortBy.order));\n      return resultsRecords;\n    }\n  }, {\n    key: 'resultsMarkup',\n    value: function resultsMarkup(resultsRecords) {\n      var _this4 = this;\n\n      var resultsMarkup = resultsRecords.map(function (record) {\n        return _react2.default.createElement(\n          'li',\n          { key: record[_ColumnNames.SEARCH_REFERENCE_ID_COLUMN_NAME] },\n          _react2.default.createElement(\n            'div',\n            { className: 'column small-16' },\n            _react2.default.createElement(\n              'div',\n              { className: 'row' },\n              _react2.default.createElement(\n                'div',\n                { className: 'column' },\n                _react2.default.createElement(\n                  'div',\n                  { className: 'project-category' },\n                  _this4.getPracticeAreasMarkup(record)\n                )\n              )\n            ),\n            _react2.default.createElement(\n              'div',\n              { className: 'row' },\n              _react2.default.createElement(\n                'div',\n                { className: 'column small-8 medium-10' },\n                _react2.default.createElement(\n                  'a',\n                  { href: '' + record['url'], className: 'project-title' },\n                  record[_ColumnNames.PROJECT_TITLE_COLUMN_NAME] || \"Project Title Unavailable\"\n                )\n              ),\n              _react2.default.createElement(\n                'div',\n                { className: 'column small-8 medium-6' },\n                record[_ColumnNames.REGION_COLUMN_NAME] || \"Region Unavailable\"\n              )\n            )\n          )\n        );\n      });\n      return resultsMarkup;\n    }\n  }, {\n    key: 'handleChange',\n    value: function handleChange(event) {\n      var searchInput = event.target.value;\n      var totalResults = this.getTotalResults(searchInput, this.state.sortBy);\n      var currentPage = this.state.currentPage;\n      var totalNumberOfPages = this.getTotalNumberOfPages(totalResults, this.props.showCount);\n      // If the user is searching, then make sure that the current page number does not go over the new totalNumberOfPages for this new totalResults set\n      if (currentPage > totalNumberOfPages) currentPage = totalNumberOfPages;\n      // If the current page was 0, but now there are results again and totalNumberOfPages is not zero anymore\n      // Then move the user to the first page\n      if (currentPage === 0 && totalNumberOfPages > 0) currentPage = 1;\n      var pagedResults = this.getPagedData(totalResults, currentPage);\n\n      this.setState({\n        searchInput: searchInput,\n        totalResults: totalResults,\n        pagedResults: pagedResults,\n        totalNumberOfPages: totalNumberOfPages,\n        currentPage: currentPage\n      });\n    }\n  }, {\n    key: 'goToPreviousPage',\n    value: function goToPreviousPage() {\n      var prevPageExists = this.state.currentPage > 1;\n      if (prevPageExists) {\n        var updatedCurrentPage = this.state.currentPage - 1;\n        var pagedResults = this.getPagedData(this.state.totalResults, updatedCurrentPage);\n        this.setState({\n          currentPage: updatedCurrentPage,\n          pagedResults: pagedResults\n        });\n      }\n    }\n  }, {\n    key: 'getTotalNumberOfPages',\n    value: function getTotalNumberOfPages(data, pageCapacity) {\n      return Math.ceil(data.length / pageCapacity);\n    }\n  }, {\n    key: 'goToNextPage',\n    value: function goToNextPage() {\n      var nextPageExists = this.state.currentPage < this.getTotalNumberOfPages(this.state.totalResults, this.props.showCount);\n      if (nextPageExists) {\n        var updatedCurrentPage = this.state.currentPage + 1;\n        var pagedResults = this.getPagedData(this.state.totalResults, updatedCurrentPage);\n        this.setState({\n          currentPage: updatedCurrentPage,\n          pagedResults: pagedResults\n        });\n      }\n    }\n  }, {\n    key: 'setSort',\n    value: function setSort(sortColumn) {\n      if (this.state.sortBy.order === 'asc') {\n        var sortBy = { columnName: sortColumn, order: 'desc' };\n        var totalResults = this.getTotalResults(this.state.searchInput, sortBy);\n        var pagedResults = this.getPagedData(totalResults, this.state.currentPage);\n        this.setState({\n          sortBy: sortBy,\n          totalResults: totalResults,\n          pagedResults: pagedResults\n        });\n      } else if (this.state.sortBy.order === 'desc') {\n        var _sortBy = { columnName: sortColumn, order: 'asc' };\n        var _totalResults = this.getTotalResults(this.state.searchInput, _sortBy);\n        var _pagedResults = this.getPagedData(_totalResults, this.state.currentPage);\n        this.setState({\n          sortBy: _sortBy,\n          totalResults: _totalResults,\n          pagedResults: _pagedResults\n        });\n      }\n    }\n  }, {\n    key: 'getSortArrow',\n    value: function getSortArrow(columnName) {\n      var sortBy = this.state.sortBy;\n      if (sortBy.columnName !== columnName) {\n        return '';\n      } else {\n        if (sortBy.order === 'asc') {\n          return _react2.default.createElement('span', { className: 'sort-caret fa fa-caret-up' });\n        } else if (sortBy.order === 'desc') {\n          return _react2.default.createElement('span', { className: 'sort-caret fa fa-caret-down' });\n        }\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this5 = this;\n\n      var searchResultsMarkup = this.resultsMarkup(this.state.pagedResults);\n      if (searchResultsMarkup.length === 0) searchResultsMarkup = _react2.default.createElement(\n        'span',\n        null,\n        'No Projects found'\n      );\n\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement(\n          'div',\n          { className: 'background-lighterBlue' },\n          _react2.default.createElement(\n            'div',\n            { className: 'row row--gutters column projects-search' },\n            _react2.default.createElement(\n              'h2',\n              null,\n              'Search our project database'\n            ),\n            _react2.default.createElement(\n              'label',\n              null,\n              _react2.default.createElement(\n                'span',\n                { className: 'sr-only' },\n                'Search Projects'\n              ),\n              _react2.default.createElement('span', { className: 'fa fa-search', 'aria-hidden': 'true' }),\n              _react2.default.createElement('input', { type: 'text', placeholder: 'Search Projects', value: this.state.value, onChange: this.handleChange })\n            )\n          )\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'row row--gutters column projects-list' },\n          _react2.default.createElement(\n            'div',\n            { className: 'column background-lighterBlue project-results-header' },\n            _react2.default.createElement(\n              'div',\n              { className: 'row' },\n              _react2.default.createElement(\n                'div',\n                { className: 'column small-8 medium-10' },\n                _react2.default.createElement(\n                  'a',\n                  { onClick: function onClick() {\n                      return _this5.setSort('Project Title');\n                    } },\n                  'Project',\n                  this.getSortArrow('Project Title')\n                )\n              ),\n              _react2.default.createElement(\n                'div',\n                { className: 'column small-8 medium-6' },\n                _react2.default.createElement(\n                  'a',\n                  { onClick: function onClick() {\n                      return _this5.setSort('Region');\n                    } },\n                  'Region',\n                  this.getSortArrow('Region')\n                )\n              )\n            )\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'overflow-container' },\n            _react2.default.createElement(\n              'ul',\n              null,\n              searchResultsMarkup\n            )\n          ),\n          _react2.default.createElement(\n            'div',\n            { className: 'row' },\n            _react2.default.createElement(_PageSelector2.default, { currentPage: this.state.currentPage, totalPages: this.getTotalNumberOfPages(this.state.totalResults, this.props.showCount), onPrevious: this.goToPreviousPage, onNext: this.goToNextPage })\n          )\n        )\n      );\n    }\n  }]);\n\n  return ProjectSearch;\n}(_react.Component);\n\nexports.default = ProjectSearch;\n\n\nProjectSearch.propTypes = {\n  projects: _propTypes2.default.arrayOf(_propTypes2.default.object),\n  searchReferenceField: _propTypes2.default.string,\n  showCount: _propTypes2.default.number\n};\n\nProjectSearch.defaultProps = {\n  searchReferenceField: _ColumnNames.SEARCH_REFERENCE_ID_COLUMN_NAME,\n  searchFields: _SearchFields.SEARCH_FIELDS,\n  showCount: 10\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SEARCH_FIELDS = undefined;\n\nvar _ColumnNames = require('../../ColumnNames');\n\nvar SEARCH_FIELDS = {\n  PROJECT_TITLE: { name: _ColumnNames.PROJECT_TITLE_COLUMN_NAME, weight: 100 },\n  REGION: { name: _ColumnNames.REGION_COLUMN_NAME, weight: 50 }\n};\n\nexports.SEARCH_FIELDS = SEARCH_FIELDS;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ProjectSearch = require('./ProjectSearch');\n\nObject.defineProperty(exports, 'default', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_ProjectSearch).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _recharts = require('recharts');\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _Reduce = require('../util/Reduce');\n\nvar _ColumnNames = require('../ColumnNames');\n\nvar _d2 = require('d3');\n\nvar _d3 = _interopRequireDefault(_d2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar sortStringsAsc = function sortStringsAsc(a, b) {\n  var aLower = a.toLowerCase();\n  var bLower = b.toLowerCase();\n  if (aLower < bLower) return -1;\n  if (aLower > bLower) return 1;\n  return 0;\n};\n\nvar addWhiteTopBorders = function addWhiteTopBorders() {\n  _d3.default.selectAll('.recharts-bar-rectangle path').attr('stroke-dasharray', function (d) {\n    var node = _d3.default.select(this);\n    var width = node.attr('width');\n    var height = node.attr('height');\n    var topBorder = width;\n    var emptyBorder = width + 2 * height;\n    var dashArray = width + ',' + emptyBorder;\n    return dashArray;\n  }).attr('stroke', 'white').attr('stroke-width', '2px');\n};\n\nvar TooltipContent = function TooltipContent(_ref) {\n  var active = _ref.active,\n      type = _ref.type,\n      payload = _ref.payload,\n      label = _ref.label,\n      xAxisDataKey = _ref.xAxisDataKey,\n      colorMapper = _ref.colorMapper,\n      tooltipValueFormatter = _ref.tooltipValueFormatter,\n      showTotal = _ref.showTotal;\n\n  if (!active) return null;\n  var hoverData = payload[0].payload;\n  var xAxisValue = hoverData[xAxisDataKey];\n  var stackData = Object.keys(hoverData).sort(sortStringsAsc).filter(function (key) {\n    return key !== xAxisDataKey;\n  }).filter(function (key) {\n    if (!showTotal) {\n      return key !== 'Total';\n    }\n    return key === 'Total';\n  }).map(function (stackDataName) {\n    return {\n      name: stackDataName,\n      value: hoverData[stackDataName],\n      color: colorMapper[stackDataName]\n    };\n  }).filter(function (slice) {\n\n    return slice.value > 0;\n  });\n\n  var stackContent = stackData.map(function (slice) {\n    return _react2.default.createElement(\n      'div',\n      { key: xAxisValue + '-' + slice.name, className: 'stack-slice-content' },\n      _react2.default.createElement(\n        'svg',\n        { width: 20, height: 20 },\n        _react2.default.createElement('circle', { cx: 10, cy: 10, r: 10, fill: slice.color })\n      ),\n      _react2.default.createElement(\n        'span',\n        { className: 'stack-slice-name' },\n        slice.name\n      ),\n      _react2.default.createElement(\n        'div',\n        { className: 'stack-slice-value' },\n        tooltipValueFormatter(slice.value)\n      )\n    );\n  });\n\n  return _react2.default.createElement(\n    'div',\n    { className: 'tt-content', style: { width: 350, height: 'auto' } },\n    _react2.default.createElement(\n      'div',\n      { className: 'tt-title' },\n      xAxisValue\n    ),\n    _react2.default.createElement(\n      'div',\n      { className: 'tt-label' },\n      hoverData.name\n    ),\n    stackContent\n  );\n};\n\nvar StackedBarChart = function (_Component) {\n  _inherits(StackedBarChart, _Component);\n\n  function StackedBarChart(props) {\n    _classCallCheck(this, StackedBarChart);\n\n    return _possibleConstructorReturn(this, (StackedBarChart.__proto__ || Object.getPrototypeOf(StackedBarChart)).call(this, props));\n  }\n\n  _createClass(StackedBarChart, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      addWhiteTopBorders();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      addWhiteTopBorders();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          width = _props.width,\n          height = _props.height,\n          data = _props.data,\n          xAxisDataKey = _props.xAxisDataKey,\n          stackDataKey = _props.stackDataKey,\n          colorPalette = _props.colorPalette,\n          _props$valueKey = _props.valueKey,\n          valueKey = _props$valueKey === undefined ? 'value' : _props$valueKey,\n          tickFormatter = _props.tickFormatter,\n          tooltipValueFormatter = _props.tooltipValueFormatter,\n          _props$showTotal = _props.showTotal,\n          showTotal = _props$showTotal === undefined ? false : _props$showTotal;\n\n      var colorsDarkToLight = colorPalette.colors.slice(0).reverse(); // Clone then reverse\n      var xGrouping = _lodash2.default.groupBy(data, xAxisDataKey);\n      var xGroupingWithSums = _lodash2.default.mapValues(xGrouping, function (collectionForXGroup) {\n        var stackGrouping = _lodash2.default.groupBy(collectionForXGroup, stackDataKey);\n        var stackGroupingWithSums = (0, _Reduce.reduceSum)(stackGrouping, valueKey);\n        return stackGroupingWithSums;\n      });\n      var xGroupingSumsTotalled = _lodash2.default.mapValues(xGroupingWithSums, function (sumObject) {\n        var total = Object.keys(sumObject).reduce(function (accumulator, sumKey) {\n          return accumulator += sumObject[sumKey];\n        }, 0);\n        return total;\n      });\n      var xAxisGroupedByTotals = _lodash2.default.invert(xGroupingSumsTotalled);\n      var xAxisDataKeyForSorting = xAxisDataKey + '-sort-key';\n      var flattenedGroupings = Object.entries(xGroupingWithSums).map(function (_ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n            xName = _ref3[0],\n            stackGrouping = _ref3[1];\n\n        return Object.assign(_defineProperty({}, xAxisDataKey, xName), stackGrouping, { Total: xGroupingSumsTotalled[xName] });\n      }).sort(function (a, b) {\n        return b.Total - a.Total;\n      });\n\n      var stackDataNamesAsc = _lodash2.default.uniqBy(data, stackDataKey).map(function (d) {\n        return d[stackDataKey];\n      }).sort(sortStringsAsc);\n      var colorMapper = {};\n      stackDataNamesAsc.forEach(function (name, index) {\n        return colorMapper[name] = colorsDarkToLight[index];\n      });\n      var stackDataNamesDesc = stackDataNamesAsc.slice(0).reverse(); // Clone and then reverse\n      var stackedBar = stackDataNamesDesc.map(function (name, stackIndex) {\n        return _react2.default.createElement(\n          _recharts.Bar,\n          { key: 'bar-' + name, dataKey: name, stackId: 'samestack', isAnimationActive: false },\n          flattenedGroupings.map(function (element, index) {\n            return _react2.default.createElement(_recharts.Cell, {\n              key: 'stacked-bar-' + element.region + '-' + index,\n              fill: colorMapper[name]\n            });\n          })\n        );\n      });\n      var legendData = stackDataNamesAsc.map(function (name, index) {\n        return { id: name, value: name, color: colorMapper[name] };\n      });\n\n      return _react2.default.createElement(\n        _recharts.BarChart,\n        { width: width, height: height, data: flattenedGroupings, margin: { top: 20, right: 0, bottom: 0, left: -20 } },\n        _react2.default.createElement(_recharts.CartesianGrid, { vertical: false, strokeDasharray: '1 1', strokeWidth: 2 }),\n        _react2.default.createElement(_recharts.XAxis, { dataKey: xAxisDataKey, interval: 0 }),\n        _react2.default.createElement(_recharts.YAxis, { tickFormatter: tickFormatter }),\n        _react2.default.createElement(_recharts.Tooltip, {\n          cursor: { stroke: '#ddd', strokeWidth: 1, fill: 'none' },\n          content: _react2.default.createElement(TooltipContent, { colorMapper: colorMapper, xAxisDataKey: xAxisDataKey, tooltipValueFormatter: tooltipValueFormatter, showTotal: showTotal })\n        }),\n        _react2.default.createElement(_recharts.Legend, { iconType: 'circle', payload: legendData }),\n        stackedBar\n      );\n    }\n  }]);\n\n  return StackedBarChart;\n}(_react.Component);\n\nexports.default = StackedBarChart;\n","'use strict';\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _qdFormatters = require('qd-formatters');\n\nvar _qdFormatters2 = _interopRequireDefault(_qdFormatters);\n\nvar _reactCountup = require('react-countup');\n\nvar _reactCountup2 = _interopRequireDefault(_reactCountup);\n\nvar _reactSizebox = require('react-sizebox');\n\nvar _reactSizebox2 = _interopRequireDefault(_reactSizebox);\n\nvar _BreakdownPanel = require('./components/BreakdownPanel');\n\nvar _BreakdownPanel2 = _interopRequireDefault(_BreakdownPanel);\n\nvar _StackedBarChart = require('./components/StackedBarChart');\n\nvar _StackedBarChart2 = _interopRequireDefault(_StackedBarChart);\n\nvar _ColorPalette = require('./util/ColorPalette');\n\nvar _ColorPalette2 = _interopRequireDefault(_ColorPalette);\n\nvar _ColorScale = require('./util/ColorScale');\n\nvar _ColorScale2 = _interopRequireDefault(_ColorScale);\n\nvar _d2 = require('d3');\n\nvar _d3 = _interopRequireDefault(_d2);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _topojson = require('topojson');\n\nvar topojson = _interopRequireWildcard(_topojson);\n\nvar _ColumnNames = require('./ColumnNames');\n\nvar _Reduce = require('./util/Reduce');\n\nvar _D3Choropleth = require('./components/D3Choropleth');\n\nvar _D3Choropleth2 = _interopRequireDefault(_D3Choropleth);\n\nvar _ProjectSearch = require('./components/ProjectSearch');\n\nvar _ProjectSearch2 = _interopRequireDefault(_ProjectSearch);\n\nvar _PracticeAreaExists = require('./util/PracticeAreaExists');\n\nvar _PracticeAreaExists2 = _interopRequireDefault(_PracticeAreaExists);\n\nvar _slugify = require('slugify');\n\nvar _slugify2 = _interopRequireDefault(_slugify);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar formatters = (0, _qdFormatters2.default)(_d3.default);\nif ('development' === \"production\") {\n  console.warn = function () {};\n}\n\n// Make sure each record only has one practice area\n// We need this in order to group by practice area because the original data can have multiple practice areas per record\nvar denormalizePracticeAreas = function denormalizePracticeAreas(data) {\n  var denormalizedData = [];\n  var practiceAreas = Object.values(_ColumnNames.PRACTICE_AREA_COLUMN_NAMES);\n  practiceAreas.forEach(function (practiceArea) {\n    var dataFilteredByPracticeArea = data.filter(function (project) {\n      return (0, _PracticeAreaExists2.default)(practiceArea, project);\n    });\n    var dataWithSinglePracticeArea = dataFilteredByPracticeArea.map(function (project) {\n      return Object.assign({}, project, { denormalizedPracticeArea: practiceArea['displayName'] });\n    });\n    denormalizedData = denormalizedData.concat(dataWithSinglePracticeArea);\n  });\n  var nonePracticeAreas = data.filter(function (project) {\n    var foundSomePracticeArea = practiceAreas.some(function (practiceArea) {\n      return (0, _PracticeAreaExists2.default)(practiceArea, project);\n    });\n    return !foundSomePracticeArea;\n  }).map(function (project) {\n    return Object.assign({}, project, { denormalizedPracticeArea: 'None' });\n  });\n\n  return denormalizedData; // .concat(nonePracticeAreas) // Unecessary to include None as a practice area\n};\n\nvar chartDataFormat = function chartDataFormat(groupedValues) {\n  var nameValueArray = Object.entries(groupedValues).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        name = _ref2[0],\n        value = _ref2[1];\n\n    return { name: name, value: value };\n  });\n  return _lodash2.default.sortBy(nameValueArray, ['value']).slice(0).reverse();\n};\nvar choroplethDataFormat = function choroplethDataFormat(groupedValues) {\n  var flattenedArray = [];\n  Object.keys(groupedValues).forEach(function (iso3Code) {\n    var country = { name: iso3Code, value: groupedValues[iso3Code] };\n    flattenedArray.push(country);\n  });\n  return flattenedArray;\n};\nvar choroplethTooltipFunc = function choroplethTooltipFunc(datum) {\n  if (datum.noDataFound) {\n    if (datum.noGeoDataFound) {\n      return 'No data found for Country';\n    }\n    return datum.geoData.properties.name + '<br/>0 solutions';\n  }\n  return datum.geoData.properties.name + '<br/>' + datum.value + ' solutions';\n};\n\n// A Project has multiple solutions\n// A solution is a Project in a country, eg: a Project in 3 countries is equivalent to 3 solutions\nvar denormalizeProjectsIntoSolutions = function denormalizeProjectsIntoSolutions(projects) {\n  var solutions = [];\n  projects.forEach(function (p) {\n    if (p[_ColumnNames.ISO_3_COlUMN_NAME].length === 0) {\n      solutions.push(p);\n    } else {\n      p[_ColumnNames.ISO_3_COlUMN_NAME].forEach(function (isoCode) {\n        var solution = Object.assign({}, p, _defineProperty({}, _ColumnNames.ISO_3_COlUMN_NAME, isoCode));\n        solutions.push(solution);\n      });\n    }\n  });\n\n  return solutions;\n};\n\nvar goToPracticeArea = function goToPracticeArea(name) {\n  window.open('/our-practices/' + (0, _slugify2.default)(name));\n};\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var projects = JEKYLL_DATA.projectsData.map(function (d, i) {\n    return Object.assign({}, d, _defineProperty({}, _ColumnNames.SEARCH_REFERENCE_ID_COLUMN_NAME, i));\n  }); //.filter((p) => p[REGION_COLUMN_NAME].indexOf('Latin') === -1) // Remove latin america to see how stacked bar chart looks\n  var solutions = denormalizeProjectsIntoSolutions(projects);\n  var totalSolutions = solutions.length;\n  var totalPartners = Object.keys(_lodash2.default.groupBy(projects, _ColumnNames.PARTNER_COLUMN_NAME)).length;\n  var totalMoney = formatters.bigCurrencyFormat(projects.reduce(function (acc, next) {\n    // Important that we iterate over 'projects' and not 'solutions', solutions would be double counting money\n    var contractValue = Number(next[_ColumnNames.CONTRACT_VALUE_COLUMN_NAME]);\n    if (isNaN(contractValue)) return acc;\n    return acc + Number(next[_ColumnNames.CONTRACT_VALUE_COLUMN_NAME]);\n  }, 0));\n  var solutionsGroupedByCountry = _lodash2.default.groupBy(solutions, _ColumnNames.ISO_3_COlUMN_NAME);\n  var totalCountries = Object.keys(solutionsGroupedByCountry).filter(function (isoCode) {\n    return isoCode !== \"\";\n  }).length; // Don't include countries that are unknown or global\n  var projectsGroupedByRegion = _lodash2.default.groupBy(projects, _ColumnNames.REGION_COLUMN_NAME);\n  var solutionsGroupedByRegion = _lodash2.default.groupBy(solutions, _ColumnNames.REGION_COLUMN_NAME);\n  var countriesInRegions = _lodash2.default.mapValues(solutionsGroupedByRegion, function (sgbr) {\n    return _lodash2.default.uniqBy(sgbr, _ColumnNames.ISO_3_COlUMN_NAME).length;\n  });\n  var projectsDenormalizedByPracticeArea = denormalizePracticeAreas(projects);\n  var solutionsDenormalizedByPracticeArea = denormalizePracticeAreas(solutions);\n  var projectsGroupedByPracticeArea = _lodash2.default.groupBy(projectsDenormalizedByPracticeArea, 'denormalizedPracticeArea');\n  var solutionsGroupedByPracticeArea = _lodash2.default.groupBy(solutionsDenormalizedByPracticeArea, 'denormalizedPracticeArea');\n  var solutionCountsForCountries = (0, _Reduce.reduceCount)(solutionsGroupedByCountry);\n\n  var choroplethData = choroplethDataFormat(solutionCountsForCountries);\n  var getCountryColor = function getCountryColor(datum) {\n    return ChoroplethColorScale.getColorFor(datum.value);\n  };\n  var ChoroplethColorScale = new _ColorScale2.default(choroplethData, _ColorPalette2.default.colors, _ColorPalette2.default.noDataColor);\n  _d3.default.json(\"/assets/data/countries.topo.json\", function (error, world) {\n\n    var countriesTopo = topojson.feature(world, world.objects.countries).features;\n\n    var projectsChoropleth = (0, _D3Choropleth2.default)('projects-choropleth').topojson(countriesTopo).data(choroplethData).colorPalette(_ColorPalette2.default).tooltipContent(choroplethTooltipFunc).numberFormatter(formatters.numberFormat).draw();\n  });\n\n  var pbpaPanel = _react2.default.createElement(_BreakdownPanel2.default, {\n    data: chartDataFormat((0, _Reduce.reduceCount)(solutionsGroupedByPracticeArea)),\n    bigNumber: totalSolutions,\n    colorPalette: _ColorPalette2.default,\n    title: 'Solutions',\n    groupTitle: 'Practice Area',\n    valueTitle: 'Solutions',\n    onRowClick: goToPracticeArea\n  });\n  var pbrPanel = _react2.default.createElement(_BreakdownPanel2.default, {\n    data: chartDataFormat(countriesInRegions),\n    bigNumber: totalCountries,\n    colorPalette: _ColorPalette2.default,\n    title: 'Countries',\n    groupTitle: 'Region',\n    valueTitle: 'Countries'\n  });\n\n  var stackedBarChart = _react2.default.createElement(\n    _reactSizebox2.default,\n    { className: 'stacked-bar-chart-sizebox' },\n    _react2.default.createElement(_StackedBarChart2.default, {\n      data: projectsDenormalizedByPracticeArea,\n      xAxisDataKey: _ColumnNames.REGION_COLUMN_NAME,\n      stackDataKey: 'denormalizedPracticeArea',\n      colorPalette: _ColorPalette2.default,\n      valueKey: _ColumnNames.CONTRACT_VALUE_COLUMN_NAME,\n      tickFormatter: formatters.bigCurrencyFormat,\n      tooltipValueFormatter: formatters.currencyFormat\n    })\n  );\n\n  _reactDom2.default.render(_react2.default.createElement(_reactCountup2.default, { start: 0, end: totalSolutions, duration: 3 }), document.getElementById('projects-count'));\n\n  _reactDom2.default.render(_react2.default.createElement(_reactCountup2.default, { start: 0, end: totalCountries, duration: 3 }), document.getElementById('countries-count'));\n\n  _reactDom2.default.render(_react2.default.createElement(_reactCountup2.default, { start: 0, end: totalPartners, duration: 3 }), document.getElementById('partners-count'));\n\n  _reactDom2.default.render(_react2.default.createElement(\n    'span',\n    null,\n    totalMoney\n  ), document.getElementById('total-money'));\n\n  _reactDom2.default.render(pbpaPanel, document.getElementById('projects-by-practice-area'));\n\n  _reactDom2.default.render(pbrPanel, document.getElementById('projects-by-region'));\n\n  _reactDom2.default.render(stackedBarChart, document.getElementById('contract-value'));\n\n  _reactDom2.default.render(_react2.default.createElement(_ProjectSearch2.default, { projects: projects }), document.getElementById('project-search'));\n});\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// Dummy data\n\nvar projectsByPracticeArea = [{ name: 'Monitoring and Evaluation', value: 184 }, { name: 'Public Financial Management and Fiscal Sustainability', value: 123 }, { name: 'Knowledge Management and Data Analytics', value: 85 }, { name: 'Education, Gender and Youth', value: 37 }, { name: 'Energy and Environment', value: 12 }, { name: 'Security, Transparency, and Governence', value: 4 }];\n\nvar projectsByRegion = [{ name: 'East Asia & Oceania', value: 184 }, { name: 'Middle East & North Africa', value: 123 }, { name: 'South & Central Asia', value: 85 }, { name: 'Sub-Saharan Africa', value: 37 }, { name: 'Western Hemisphere', value: 12 }, { name: 'World', value: 9 }];\n\nvar practiceAreas = ['Monitoring and Evaluation', 'Public Financial Management and Fiscal Sustainability', 'Knowledge Management and Data Analytics', 'Education, Gender and Youth', 'Energy and Environment', 'Security, Transparency, and Governance'];\n\nvar regionAndPracAreas = [{ region: 'East Asia & Oceania', practiceArea: 'Monitoring and Evaluation', value: 100 }, { region: 'East Asia & Oceania', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 300 }, { region: 'East Asia & Oceania', practiceArea: 'Knowledge Management and Data Analytics', value: 80 }, { region: 'East Asia & Oceania', practiceArea: 'Education, Gender and Youth', value: 250 }, { region: 'East Asia & Oceania', practiceArea: 'Energy and Environment', value: 80 }, { region: 'East Asia & Oceania', practiceArea: 'Security, Transparency, and Governance', value: 50 }, { region: 'Middle East & North Africa', practiceArea: 'Monitoring and Evaluation', value: 500 }, { region: 'Middle East & North Africa', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 440 }, { region: 'Middle East & North Africa', practiceArea: 'Knowledge Management and Data Analytics', value: 400 }, { region: 'Middle East & North Africa', practiceArea: 'Education, Gender and Youth', value: 230 }, { region: 'Middle East & North Africa', practiceArea: 'Energy and Environment', value: 200 }, { region: 'Middle East & North Africa', practiceArea: 'Security, Transparency, and Governance', value: 80 }, { region: 'South & Central Asia', practiceArea: 'Monitoring and Evaluation', value: 550 }, { region: 'South & Central Asia', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 }, { region: 'South & Central Asia', practiceArea: 'Knowledge Management and Data Analytics', value: 350 }, { region: 'South & Central Asia', practiceArea: 'Education, Gender and Youth', value: 250 }, { region: 'South & Central Asia', practiceArea: 'Energy and Environment', value: 100 }, { region: 'South & Central Asia', practiceArea: 'Security, Transparency, and Governance', value: 50 }, { region: 'Sub-Saharan Africa', practiceArea: 'Monitoring and Evaluation', value: 550 }, { region: 'Sub-Saharan Africa', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 }, { region: 'Sub-Saharan Africa', practiceArea: 'Knowledge Management and Data Analytics', value: 350 }, { region: 'Sub-Saharan Africa', practiceArea: 'Education, Gender and Youth', value: 250 }, { region: 'Sub-Saharan Africa', practiceArea: 'Energy and Environment', value: 100 }, { region: 'Sub-Saharan Africa', practiceArea: 'Security, Transparency, and Governance', value: 50 }, { region: 'Western Hemisphere', practiceArea: 'Monitoring and Evaluation', value: 550 }, { region: 'Western Hemisphere', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 }, { region: 'Western Hemisphere', practiceArea: 'Knowledge Management and Data Analytics', value: 350 }, { region: 'Western Hemisphere', practiceArea: 'Education, Gender and Youth', value: 250 }, { region: 'Western Hemisphere', practiceArea: 'Energy and Environment', value: 100 }, { region: 'Western Hemisphere', practiceArea: 'Security, Transparency, and Governance', value: 50 }, { region: 'World', practiceArea: 'Monitoring and Evaluation', value: 550 }, { region: 'World', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 }, { region: 'World', practiceArea: 'Knowledge Management and Data Analytics', value: 350 }, { region: 'World', practiceArea: 'Education, Gender and Youth', value: 250 }, { region: 'World', practiceArea: 'Energy and Environment', value: 100 }, { region: 'World', practiceArea: 'Security, Transparency, and Governance', value: 50 }, { region: 'Others', practiceArea: 'Monitoring and Evaluation', value: 550 }, { region: 'Others', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 }, { region: 'Others', practiceArea: 'Knowledge Management and Data Analytics', value: 350 }, { region: 'Others', practiceArea: 'Education, Gender and Youth', value: 250 }, { region: 'Others', practiceArea: 'Energy and Environment', value: 100 }, { region: 'Others', practiceArea: 'Security, Transparency, and Governance', value: 50 }];\n\nexports.regionAndPracAreas = regionAndPracAreas;\nexports.practiceAreas = practiceAreas;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  colors: ['#62AFD1', '#3D98C3', '#297DA6', '#1F5D7B', '#173F53', '#0E242F'],\n  noDataColor: '#cae0ea'\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _d = require('d3');\n\nvar _d2 = _interopRequireDefault(_d);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ColorScale = function () {\n  function ColorScale(data, colors) {\n    var noDataColor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"#ddd\";\n    var valueAccessorFunc = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function (d) {\n      return d.value;\n    };\n    var scaleType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'quantize';\n    var customDomain = arguments[5];\n\n    _classCallCheck(this, ColorScale);\n\n    this.data = data;\n    this.colors = colors;\n    this.noDataColor = noDataColor;\n    this.valueAccessorFunc = valueAccessorFunc;\n    this.scaleType = scaleType;\n    this.customDomain = customDomain;\n\n    // Setup the scale based on scale type\n    if (scaleType === 'quantize') {\n      // Calculate the colors based on a linear quantize domain\n      this.scale = _d2.default.scale.quantize();\n    } else if (scaleType === \"quantile\") {\n      // Calculate the colors by n domain sections(similar to quartiles but of n sections)\n      this.scale = _d2.default.scale.quantile();\n    }\n    this.scale.domain(this.calculateDomain()).range(colors);\n  }\n\n  _createClass(ColorScale, [{\n    key: 'calculateDomain',\n    value: function calculateDomain() {\n      if (this.customDomain) {\n        return this.customDomain;\n      } else if (this.scaleType === 'quantize') {\n        // Standard min/max domain for linear quantize scale\n        return [_d2.default.min(this.data, this.valueAccessorFunc), _d2.default.max(this.data, this.valueAccessorFunc)];\n      } else if (this.scaleType === 'quantile') {\n        // If the user didn't specify a list of quantiles using the customDomain\n        // then use the data itself as the quantiles\n        return this.data.map(this.valueAccessorFunc);\n      }\n    }\n  }, {\n    key: 'setDomain',\n    value: function setDomain() {\n      this.scale.domain(this.calculateDomain());\n    }\n  }, {\n    key: 'setData',\n    value: function setData(data) {\n      this.data = data;\n    }\n  }, {\n    key: 'getColorFor',\n    value: function getColorFor(value) {\n      if (value === undefined) {\n        return this.noDataColor;\n      }\n      return this.scale(value);\n    }\n  }]);\n\n  return ColorScale;\n}();\n\nexports.default = ColorScale;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// Make practice area names nicer looking to read\n\nvar PracticeAreaTitle = function PracticeAreaTitle(practiceArea) {\n  return practiceArea.replace('Practice Area', '');\n};\n\nexports.PracticeAreaTitle = PracticeAreaTitle;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ColumnNames = require('../ColumnNames');\n\nvar PracticeAreaExists = function PracticeAreaExists(practiceArea, project) {\n  var practiceAreasForProject = project[_ColumnNames.PRACTICE_AREA_COLUMN_NAME];\n  return practiceAreasForProject.indexOf(practiceArea['displayName']) !== -1;\n};\n\nexports.default = PracticeAreaExists;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.reduceCountIncludeExtraData = exports.reduceCount = exports.reduceSum = undefined;\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar reduceSum = function reduceSum(grouping, valueKey) {\n  return _lodash2.default.mapValues(grouping, function (recordsInGroup) {\n    return recordsInGroup.reduce(function (accumulator, next) {\n      var nextValue = Number(next[valueKey]);\n      if (isNaN(nextValue)) {\n        console.warn('Tried to reduce with a non numeric value: ' + next[valueKey]);\n        console.warn('Using zero as the value instead');\n        return accumulator += 0;\n      }\n      return accumulator += Number(next[valueKey]);\n    }, 0);\n  });\n};\n\nvar reduceCount = function reduceCount(grouping) {\n  return _lodash2.default.mapValues(grouping, function (recordsInGroup) {\n    return recordsInGroup.length;\n  });\n};\n\nvar reduceCountIncludeExtraData = function reduceCountIncludeExtraData(grouping, generateExtraData) {\n  return _lodash2.default.mapValues(grouping, function (recordsInGroup) {\n    var extraData = generateExtraData(recordsInGroup);\n    var countWithExtra = Object.assign({ count: recordsInGroup.length }, extraData);\n    return countWithExtra;\n  });\n};\nexports.reduceSum = reduceSum;\nexports.reduceCount = reduceCount;\nexports.reduceCountIncludeExtraData = reduceCountIncludeExtraData;\n","'use strict';\n\n/* jshint ignore:start */\n(function () {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = window.brunch || {};\n  var ar = br['auto-reload'] = br['auto-reload'] || {};\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function cacheBuster(url) {\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') + 'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function page() {\n      window.location.reload(true);\n    },\n\n    stylesheet: function stylesheet() {\n      [].slice.call(document.querySelectorAll('link[rel=stylesheet]')).filter(function (link) {\n        var val = link.getAttribute('data-autoreload');\n        return link.href && val != 'false';\n      }).forEach(function (link) {\n        link.href = cacheBuster(link.href);\n      });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function () {\n        document.body.offsetHeight;\n      }, 25);\n    },\n\n    javascript: function javascript() {\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function (script) {\n        return script.text;\n      }).filter(function (text) {\n        return text.length > 0;\n      });\n      var srcScripts = scripts.filter(function (script) {\n        return script.src;\n      });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function onLoad() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function (script) {\n            eval(script);\n          });\n        }\n      };\n\n      srcScripts.forEach(function (script) {\n        var src = script.src;\n        script.remove();\n        var newScript = document.createElement('script');\n        newScript.src = cacheBuster(src);\n        newScript.async = true;\n        newScript.onload = onLoad;\n        document.head.appendChild(newScript);\n      });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function connect() {\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function (event) {\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function () {\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function () {\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}
=======
{"version":3,"sources":["assets/js/projects/ColumnNames.js","assets/js/projects/components/BreakdownPanel/PieChart.js","assets/js/projects/components/BreakdownPanel/RowChart/DefaultRow.js","assets/js/projects/components/BreakdownPanel/RowChart/RowChart.js","assets/js/projects/components/BreakdownPanel/RowChart/index.js","assets/js/projects/components/BreakdownPanel/index.js","assets/js/projects/components/D3Choropleth.js","assets/js/projects/components/ProjectSearch/PageSelector.js","assets/js/projects/components/ProjectSearch/ProjectSearch.js","assets/js/projects/components/ProjectSearch/SearchFields.js","assets/js/projects/components/ProjectSearch/index.js","assets/js/projects/components/StackedBarChart.js","assets/js/projects/entry.js","assets/js/projects/test/Data.js","assets/js/projects/util/ColorPalette.js","assets/js/projects/util/ColorScale.js","assets/js/projects/util/Humanify.js","assets/js/projects/util/PracticeAreaExists.js","assets/js/projects/util/Reduce.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["ENUMERATED_COLUMN_NAMES","JEKYLL_DATA","enumeratedColumnNames","PRACTICE_AREA_COLUMN_NAMES","enumeratedPracticeAreas","COUNTRY_COLUMN_NAME","REGION_COLUMN_NAME","PARTNER_COLUMN_NAME","PROJECT_TITLE_COLUMN_NAME","CONTRACT_VALUE_COLUMN_NAME","ID_COLUMN_NAME","PRACTICE_AREA_COLUMN_NAME","SEARCH_REFERENCE_ID_COLUMN_NAME","ISO_3_COlUMN_NAME","width","height","data","title","colorScale","outerRadius","innerRadius","map","element","index","name","getColorFor","value","TooltipContent","active","type","payload","label","valueName","hoverData","defaultNameRenderer","x","y","fontSize","refFunc","onRowClick","RadRow","props","state","showEllipses","textWidth","nameTextElement","getBoundingClientRect","availableWidthForName","setState","chartWidth","widthForCircle","getCircleRadius","circlePaddingRight","rowHeight","heightForText","datum","xScale","nameRenderer","barWidth","textValueClassNames","barHeight","circleRadius","barY","ellipsesXAdjustment","ellipses","spaceForValueText","color","textElement","propTypes","number","shape","string","arrayOf","func","defaultProps","console","log","RowChart","length","scrollbarWidth","svgHeight","maxValue","max","d","scale","linear","domain","range","rows","i","Row","row","svgWidth","colorMapper","containerStyles","overflow","className","default","bigNumber","colorPalette","groupTitle","valueTitle","colors","noDataColor","parentSelector","chart","d3","select","window","on","throttle","zoom","behavior","scaleExtent","zoomAndPan","document","getElementById","offsetWidth","parentHeight","offsetHeight","center","projection","path","svg","g","_topojson","_data","_colorScale","_colorPalette","_colorMapper","_valueAccessor","undefined","_tooltipContent","_numberFormatter","Math","round","tooltip","append","attr","setup","geo","mercator","translate","PI","call","click","setupColorMapper","addLegend","legendBottomOffset","legend","classed","text","keyContainer","legendColors","slice","reverse","push","keyRow","selectAll","enter","getLegendValueRange","colorValueRange","invertExtent","ceil","floor","numberFormatter","_","topojson","tooltipContent","getDatum","key","find","geoDatum","id","noDataFound","noGeoDataFound","Object","assign","geoData","getDataValue","draw","country","insert","properties","style","offsetL","offsetLeft","offsetT","offsetTop","mouse","node","parseInt","html","redraw","remove","zoomFromButton","t","event","s","h","min","throttleTimer","clearTimeout","setTimeout","latlon","invert","addpoint","lon","lat","gpoint","interpolateZoom","self","transition","duration","tween","iTranslate","interpolate","iScale","zoomClick","clicked","target","direction","factor","target_zoom","extent","translate0","l","view","k","preventDefault","resetZoom","currentPage","totalPages","onPrevious","onNext","ProjectSearch","searchInput","totalResults","pagedResults","totalNumberOfPages","sortBy","columnName","order","searchIndex","ref","searchReferenceField","values","searchFields","forEach","searchField","fieldName","fieldWeight","weight","field","pipeline","stemmer","projects","project","add","handleChange","bind","getTotalResults","getPagedData","goToNextPage","goToPreviousPage","getTotalNumberOfPages","setSort","showCount","record","practiceAreaObjects","pa","practiceAreasForProject","filter","markup","practiceArea","separator","pageNumber","zeroedPageIndex","startIndex","endIndex","sortColumn","sortOrder","a","b","localeCompare","resultsRefs","search","result","resultsRecords","Number","sort","generateSortFunc","resultsMarkup","getPracticeAreasMarkup","prevPageExists","updatedCurrentPage","pageCapacity","nextPageExists","searchResultsMarkup","getSortArrow","object","SEARCH_FIELDS","PROJECT_TITLE","REGION","sortStringsAsc","aLower","toLowerCase","bLower","addWhiteTopBorders","topBorder","emptyBorder","dashArray","xAxisDataKey","tooltipValueFormatter","showTotal","xAxisValue","stackData","keys","stackDataName","stackContent","StackedBarChart","stackDataKey","valueKey","tickFormatter","colorsDarkToLight","xGrouping","groupBy","xGroupingWithSums","mapValues","collectionForXGroup","stackGrouping","stackGroupingWithSums","xGroupingSumsTotalled","sumObject","total","reduce","accumulator","sumKey","xAxisGroupedByTotals","xAxisDataKeyForSorting","flattenedGroupings","entries","xName","Total","stackDataNamesAsc","uniqBy","stackDataNamesDesc","stackedBar","stackIndex","region","legendData","top","right","bottom","left","stroke","strokeWidth","fill","formatters","denormalizePracticeAreas","denormalizedData","practiceAreas","dataFilteredByPracticeArea","dataWithSinglePracticeArea","denormalizedPracticeArea","concat","nonePracticeAreas","foundSomePracticeArea","some","chartDataFormat","groupedValues","nameValueArray","choroplethDataFormat","flattenedArray","iso3Code","choroplethTooltipFunc","denormalizeProjectsIntoSolutions","solutions","p","isoCode","solution","goToPracticeArea","location","href","addEventListener","projectsData","totalSolutions","totalPartners","totalMoney","bigCurrencyFormat","acc","next","contractValue","isNaN","solutionsGroupedByCountry","totalCountries","projectsGroupedByRegion","solutionsGroupedByRegion","countriesInRegions","sgbr","projectsDenormalizedByPracticeArea","solutionsDenormalizedByPracticeArea","projectsGroupedByPracticeArea","solutionsGroupedByPracticeArea","solutionCountsForCountries","choroplethData","getCountryColor","ChoroplethColorScale","json","error","world","countriesTopo","feature","objects","countries","features","projectsChoropleth","numberFormat","pbpaPanel","pbrPanel","stackedBarChart","currencyFormat","render","projectsByPracticeArea","projectsByRegion","regionAndPracAreas","ColorScale","valueAccessorFunc","scaleType","customDomain","quantize","quantile","calculateDomain","PracticeAreaTitle","replace","PracticeAreaExists","indexOf","reduceSum","grouping","recordsInGroup","nextValue","warn","reduceCount","reduceCountIncludeExtraData","generateExtraData","extraData","countWithExtra","count","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","url","date","Date","now","toString","browser","navigator","userAgent","forceRepaint","reloaders","page","reload","stylesheet","querySelectorAll","link","val","getAttribute","body","javascript","scripts","textScripts","script","srcScripts","src","loaded","all","onLoad","eval","newScript","createElement","async","onload","head","appendChild","port","host","server","hostname","connect","connection","onmessage","message","reloader","onerror","readyState","close","onclose"],"mappings":"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","file":"assets/brunch-compiled/projects-bundle.js","sourcesContent":["import lodash from 'lodash'\n\nconst ENUMERATED_COLUMN_NAMES = JEKYLL_DATA.enumeratedColumnNames\nconst PRACTICE_AREA_COLUMN_NAMES = JEKYLL_DATA.enumeratedPracticeAreas\nconst COUNTRY_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['COUNTRY']\nconst REGION_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['REGION']\nconst PARTNER_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['PARTNER']\nconst PROJECT_TITLE_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['PROJECT_TITLE']\nconst CONTRACT_VALUE_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['CONTRACT_VALUE']\nconst ID_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['DATA_ID']\nconst PRACTICE_AREA_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['PRACTICE_AREA']\nconst SEARCH_REFERENCE_ID_COLUMN_NAME = 'search_ref_id'\nconst ISO_3_COlUMN_NAME = ENUMERATED_COLUMN_NAMES['ISO3_CODE']\n\nexport { \n  PRACTICE_AREA_COLUMN_NAME,\n  PRACTICE_AREA_COLUMN_NAMES,\n  COUNTRY_COLUMN_NAME,\n  PROJECT_TITLE_COLUMN_NAME,\n  ID_COLUMN_NAME,\n  REGION_COLUMN_NAME,\n  PARTNER_COLUMN_NAME,\n  CONTRACT_VALUE_COLUMN_NAME,\n  SEARCH_REFERENCE_ID_COLUMN_NAME,\n  ISO_3_COlUMN_NAME\n}\n","import React from 'react'\nimport { PieChart, Pie, Cell, Tooltip } from 'recharts'\n\nconst TooltipContent = function({ active, type, payload, label, valueName }) {\n  if(!active) return null\n  const hoverData = payload[0].payload\n  return (\n    <div className='tt-content' style={{ width: 200, height: 'auto' }}>\n      <div className='tt-label'>{hoverData.name}</div>\n      {hoverData.value} {valueName}\n    </div>\n  )\n}\n\nexport default function({ width, height, data, title, colorScale }) {\n  const outerRadius = (width > height) ? height / 2 : width / 2\n  const innerRadius = outerRadius * .4\n  return (\n    <PieChart width={width} height={height} className='breakdown-pie'>\n      <Tooltip content={<TooltipContent valueName={title} />} />\n      <Pie\n        dataKey='value'\n        data={data}\n        innerRadius={innerRadius}\n        outerRadius={outerRadius}\n        cx='50%'\n        cy='50%'\n        startAngle={90}\n        endAngle={-270}\n      >\n        {data.map((element, index) => <Cell key={element.name} fill={colorScale.getColorFor(data[index].value)} />)}\n      </Pie>\n    </PieChart>\n  )\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport d3 from 'd3'\nimport classNames from 'classnames'\n\nconst defaultNameRenderer = (name, x, y, fontSize, refFunc, onRowClick) => (\n  <text\n    ref={refFunc}\n    className=\"rad-row-name-text\"\n    x={x}\n    y={y}\n    fontSize={fontSize}\n    alignmentBaseline=\"hanging\"\n    onClick={() => {onRowClick(name)}}\n  >\n    <title>{name}</title>\n    {name}\n  </text>\n)\n\nexport default class RadRow extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showEllipses: false\n    }\n  }\n\n  componentDidMount() {\n    const textWidth = this.nameTextElement.getBoundingClientRect().width\n    if (textWidth > this.availableWidthForName() && !this.state.showEllipses) {\n      this.setState({ showEllipses: true })\n    }\n  }\n\n  componentDidUpdate() {\n    const textWidth = this.nameTextElement.getBoundingClientRect().width\n    if (textWidth > this.availableWidthForName() && !this.state.showEllipses) {\n      this.setState({ showEllipses: true })\n    } else if (textWidth < this.availableWidthForName() && this.state.showEllipses) {\n      this.setState({ showEllipses: false })\n    }\n  }\n\n  availableWidthForName() {\n    return (this.props.chartWidth - 53) - this.widthForCircle()\n  }\n\n  widthForCircle() {\n    return (this.getCircleRadius() * 2) + this.props.circlePaddingRight\n  }\n\n  heightForText() {\n    return this.props.rowHeight / 3\n  }\n\n  getCircleRadius() {\n    return this.heightForText() / 2\n  }\n\n  render() {\n    const { y, rowHeight, chartWidth, datum, data, xScale, nameRenderer, onRowClick } = this.props\n    let barWidth\n    const textValueClassNames = classNames('rad-row-value-text', { 'rad-row-negative': (datum.value < 0) })\n    if (datum.value < 0) {\n      barWidth = 0\n    } else {\n      barWidth = xScale(datum.value)\n    }\n    const barHeight = rowHeight / 6\n    const fontSize = this.heightForText()\n    const circleRadius = this.getCircleRadius()\n    const barY = y + (rowHeight / 3) + (rowHeight / 6)\n    const ellipsesXAdjustment = 2 // Move ellipsis slightly right so it has padding\n    const ellipses = (this.state.showEllipses) ?\n      (\n        <text\n          className={'rad-row-name-ellipses'}\n          x={chartWidth - this.props.spaceForValueText + ellipsesXAdjustment}\n          y={y}\n          fontSize={fontSize}\n          alignmentBaseline=\"hanging\"\n        >\n          <title>{datum.name}</title>\n          ...\n        </text>\n      ) :\n      ''\n\n    return (\n      <g className=\"rad-row\">\n        <circle\n          cx={0 + circleRadius}\n          cy={y + circleRadius}\n          r={circleRadius}\n          fill={this.props.color}\n        />\n        {nameRenderer(datum.name, this.widthForCircle(), y, fontSize, (textElement) => { this.nameTextElement = textElement }, onRowClick)}\n        <rect\n          className=\"rad-row-value-background\"\n          x={chartWidth - this.props.spaceForValueText}\n          y={y}\n          width={this.props.spaceForValueText}\n          height={rowHeight - barHeight}\n        />\n        {ellipses}\n        <text\n          className={textValueClassNames}\n          x={chartWidth}\n          y={y}\n          fontSize={fontSize}\n          textAnchor=\"end\"\n          alignmentBaseline=\"hanging\"\n        >\n          {datum.value}\n        </text>\n        <rect\n          className=\"rad-row-background\"\n          y={barY}\n          width={chartWidth}\n          height={barHeight}\n        />\n        <rect\n          className=\"rad-row-bar\"\n          y={barY}\n          width={barWidth}\n          height={barHeight}\n          fill={this.props.color}\n        />\n      </g>\n    )\n  }\n}\n\nRadRow.propTypes = {\n  y: PropTypes.number,\n  chartWidth: PropTypes.number,\n  rowHeight: PropTypes.number,\n  datum: PropTypes.shape({\n    name: PropTypes.string,\n    value: PropTypes.number\n  }),\n  data: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string,\n    value: PropTypes.number\n  })),\n  xScale: PropTypes.func,\n  color: PropTypes.string,\n  nameRenderer: PropTypes.func,\n  onRowClick: PropTypes.func\n}\n\nRadRow.defaultProps = {\n  circlePaddingRight: 8,\n  spaceForValueText: 54,\n  nameRenderer: defaultNameRenderer,\n  onRowClick: () => {console.log('row clicked')}\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport d3 from 'd3'\nimport DefaultRow from './DefaultRow.js'\n\nexport default class RowChart extends Component {\n  rowHeight() {\n    if (this.props.rowHeight) return this.props.rowHeight\n\n    return this.props.height / this.props.data.length\n  }\n\n  svgHeight() {\n    return this.rowHeight() * this.props.data.length\n  }\n\n  svgWidth() {\n    const scrollbarWidth = 18\n    if (this.svgHeight() >= this.props.height) return this.props.width - scrollbarWidth\n\n    return this.props.width\n  }\n\n  xScale() {\n    const maxValue = d3.max(this.props.data, d => d.value)\n    return d3.scale.linear()\n      .domain([0, maxValue])\n      .range([0, this.props.width])\n  }\n\n  render() {\n    const rowHeight = this.rowHeight()\n    const rows = this.props.data.map((d, i) => {\n      const y = rowHeight * i\n      const Row = this.props.row\n      return (\n        <Row\n          key={d.name}\n          y={y}\n          rowHeight={rowHeight}\n          chartWidth={this.svgWidth()}\n          datum={d}\n          data={this.props.data}\n          xScale={this.xScale()}\n          color={this.props.colorMapper(d.value)}\n          nameRenderer={this.props.nameRenderer}\n          onRowClick={this.props.onRowClick}\n        />\n      )\n    })\n\n    const containerStyles = {\n      width: this.props.width,\n      height: this.props.height,\n      overflow: 'auto'\n    }\n    return (\n      <div className={`row-chart ${this.props.className || ''}`} style={containerStyles}>\n        <svg width={this.svgWidth()} height={this.svgHeight()}>\n          {rows}\n        </svg>\n      </div>\n    )\n  }\n}\n\nRowChart.propTypes = {\n  className: PropTypes.string,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  data: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string,\n    value: PropTypes.number\n  })),\n  row: PropTypes.func,\n  rowHeight: PropTypes.number,\n  colorMapper: PropTypes.func,\n  nameRenderer: PropTypes.func,\n  onRowClick: PropTypes.func\n}\n\nRowChart.defaultProps = {\n  row: DefaultRow\n}\n","export { default } from './RowChart'\n","import React from 'react'\nimport RowChart from './RowChart'\nimport ColorScale from '../../util/ColorScale.js'\nimport CountUp from 'react-countup'\nimport Sizebox from 'react-sizebox'\nimport PieChart from './PieChart'\n\nexport default function({ data, bigNumber, colorPalette, title, groupTitle, valueTitle, onRowClick, className }) {\n  const colorScale = new ColorScale(data, colorPalette.colors, colorPalette.noDataColor)\n\n  return (\n    <div className={'breakdown-panel row ' + className}>\n      <div className='left-column column medium-5'>\n        <CountUp className='number-countup' start={0} end={bigNumber} duration={3} />\n        <div className='breakdown-title'>{title}</div>\n        <Sizebox className=\"pie-sizebox\">\n          <PieChart data={data} title={title} colorScale={colorScale} />\n        </Sizebox>\n      </div>\n      <div className='right-column column medium-10'>\n        <div className='breakdown-group-title'>By {groupTitle}</div>\n        <div className='breakdown-value-title'>{valueTitle}</div>\n        <Sizebox className=\"row-chart-sizebox\">\n          <RowChart\n            rowHeight={40}\n            data={data}\n            colorMapper={(value) => colorScale.getColorFor(value)}\n            onRowClick={onRowClick}\n          />\n        </Sizebox>\n      </div>\n    </div>\n  )\n}\n","import ColorScale from '../util/ColorScale'\n\n// Choropleth adapted from http://techslides.com/demos/d3/worldmap-template.html\n// Zoom buttons adapted from http://bl.ocks.org/linssen/7352810\nexport default function(parentSelector) {\n  const chart = {}\n\n  d3.select(window).on(\"resize\", throttle);\n\n  var zoom = d3.behavior.zoom()\n      .scaleExtent([1, 9])\n      .on(\"zoom\", zoomAndPan);\n\n  var width = document.getElementById('projects-choropleth').offsetWidth;\n  var parentHeight = document.getElementById('projects-choropleth').offsetHeight\n  var height = width / 2;\n  let center = [width/2, height / 2]\n\n  var projection,path,svg,g;\n  let _topojson, _data, _colorScale\n  let _colorPalette = { colors: ['green', 'red', 'blue'], noDataColor: '#bbb' }\n  let _colorMapper = (value) => '#ccc'\n  let _valueAccessor = (datum) => (datum !== undefined) ? datum.value : undefined\n  let _tooltipContent = (datum) => `${datum.name}<br/>${datum.value}`\n  let _numberFormatter = (value) => Math.round(value)\n\n  var tooltip = d3.select(\"#projects-choropleth\").append(\"div\").attr(\"class\", \"tooltip hidden\");\n\n  setup(width,height);\n\n  function setup(width,height){\n    projection = d3.geo.mercator()\n      .translate([(width/2), (height/2)])\n      .scale( width / 2 / Math.PI);\n\n    path = d3.geo.path().projection(projection);\n\n    svg = d3.select(\"#projects-choropleth\").append(\"svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .call(zoom)\n        .on(\"wheel.zoom\", null) // Don't zoom with mouse scroll\n        //.on(\"click\", click)\n        .append(\"g\");\n\n    g = svg.append(\"g\")\n          .on(\"click\", click);\n  }\n\n  function setupColorMapper() {\n    _colorScale = new ColorScale(_data, _colorPalette.colors, _colorPalette.noDataColor)\n    _colorMapper = (value) => _colorScale.getColorFor(value)\n  }\n\n  function addLegend() {\n    const legendBottomOffset = (height - parentHeight > 0) ? parentHeight - 200: height - 200\n    const legend = svg.append('g')\n      .classed('legend', true)\n      .attr('transform', `translate(${20}, ${legendBottomOffset})`)\n    legend.append('rect')\n      .classed('background', true)\n      .attr('width', 170)\n      .attr('height', 180)\n      .attr('fill', 'white')\n    \n    legend.append('text')\n      .classed('legend-title', true)\n      .text('Legend')\n      .attr('alignment-baseline', 'hanging')\n      .attr('y', 10)\n      .attr('x', 10)\n    \n    const keyContainer = legend.append('g')\n      .classed('key-container', true)\n      .attr('transform', `translate(${10}, 35)`)\n    \n    const legendColors = _colorScale.scale.range().slice(0).reverse()\n    legendColors.push(_colorScale.noDataColor)\n    const keyRow = keyContainer.selectAll('g')\n      .data(legendColors)\n      .enter()\n      .append('g')\n      .attr('transform', (d, i) => `translate(${0}, ${i * 20})`)\n\n    keyRow.append('rect')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('height', 15)\n      .attr('width', 15)\n      .attr('fill', (color) => color)\n    \n    keyRow.append('text')\n      .text((color) => getLegendValueRange(color))\n      .classed('key-text', true)\n      .attr('alignment-baseline', 'hanging')\n      .attr('x', 25)\n      .attr('y', 0)\n  }\n\n  function getLegendValueRange(color) {\n    const colorValueRange = _colorScale.scale.invertExtent\n    if(!colorValueRange(color)[0]) return '0 Solutions'\n    return `${_numberFormatter(Math.ceil(colorValueRange(color)[0]))} to ${_numberFormatter(Math.floor(colorValueRange(color)[1]))} Solutions`\n  }\n\n  chart.numberFormatter = function (_) {\n    _numberFormatter = _\n    return chart\n  }\n\n  chart.colorPalette = function(_) {\n    _colorPalette = _\n    if(_data !== undefined) setupColorMapper()\n    return chart\n  }\n\n  chart.topojson = function (_) {\n    _topojson = _\n    return chart\n  }\n\n  chart.data = function (_) {\n    _data = _\n    return chart\n  }\n\n  chart.tooltipContent = function(_) {\n    _tooltipContent = _\n    return chart\n  }\n\n  function getDatum(key) {\n    const datum = _data.find((d) => d.name === key)\n    if(!datum) {\n      const geoDatum = _topojson.find((d) => d.id === key)\n      if(!geoDatum) {\n        return{ noDataFound: true, noGeoDataFound: true, name: key }\n      }\n      return Object.assign({ noDataFound: true }, { geoData: geoDatum })\n    }\n    return Object.assign(datum, { geoData: _topojson.find((d) => d.id === key)})\n  }\n\n  function getDataValue(key) {\n    return _valueAccessor(getDatum(key))\n  }\n\n  chart.draw = function () {\n    setupColorMapper()\n    addLegend()\n    var country = g.selectAll(\".country\").data(_topojson);\n\n    country.enter().insert(\"path\")\n        .attr(\"class\", \"country\")\n        .attr(\"d\", path)\n        .attr(\"id\", function(d,i) { return d.id; })\n        .attr(\"title\", function(d,i) { return d.properties.name; })\n        .style(\"fill\", function(d, i) { return _colorMapper(getDataValue(d.id)); });\n    d3.selectAll(\".country\").style(\"stroke-width\", .5 / zoom.scale());\n\n    //offsets for tooltips\n    var offsetL = document.getElementById('projects-choropleth').offsetLeft+20;\n    var offsetT = document.getElementById('projects-choropleth').offsetTop+10;\n\n    //tooltips\n    country\n      .on(\"mousemove\", function(d,i) {\n\n        var mouse = d3.mouse(svg.node()).map( function(d) { return parseInt(d); } );\n\n        tooltip.classed(\"hidden\", false)\n              .attr(\"style\", \"left:\"+(mouse[0]+offsetL)+\"px;top:\"+(mouse[1]+offsetT)+\"px\")\n              .html(_tooltipContent(getDatum(d.id)));\n\n        })\n        .on(\"mouseout\",  function(d,i) {\n          tooltip.classed(\"hidden\", true);\n        }); \n\n  }\n\n  function redraw() {\n    width = document.getElementById('projects-choropleth').offsetWidth;\n    height = width / 2;\n    d3.select('svg').remove();\n    setup(width,height);\n    chart.draw(_topojson);\n  }\n\n  function zoomAndPan(zoomFromButton) {\n    if(!zoomFromButton) {\n      var t = d3.event.translate;\n      var s = d3.event.scale; \n      var h = height/4;\n\n      t[0] = Math.min(\n        (width/height)  * (s - 1), \n        Math.max( width * (1 - s), t[0] )\n      );\n\n      t[1] = Math.min(\n        h * (s - 1) + h * s, \n        Math.max(height  * (1 - s) - h * s, t[1])\n      );\n\n      zoom.translate(t);\n      g.attr(\"transform\", \"translate(\" + t + \")scale(\" + s + \")\");\n    }\n\n    \n    g.attr(\"transform\", \"translate(\" + zoom.translate() + \")scale(\" + zoom.scale() + \")\");\n    //adjust the country hover stroke width based on zoom level\n    d3.selectAll(\".country\").style(\"stroke-width\", .5 / zoom.scale());\n\n  }\n\n  var throttleTimer;\n  function throttle() {\n    window.clearTimeout(throttleTimer);\n      throttleTimer = window.setTimeout(function() {\n        redraw();\n      }, 200);\n  }\n\n  //geo translation on mouse click in map\n  function click() {\n    var latlon = projection.invert(d3.mouse(this));\n  }\n\n  //function to add points and text to the map (used in plotting capitals)\n  function addpoint(lon,lat,text) {\n\n    var gpoint = g.append(\"g\").attr(\"class\", \"gpoint\");\n    var x = projection([lon,lat])[0];\n    var y = projection([lon,lat])[1];\n\n    gpoint.append(\"svg:circle\")\n          .attr(\"cx\", x)\n          .attr(\"cy\", y)\n          .attr(\"class\",\"point\")\n          .attr(\"r\", 1.5);\n\n    //conditional in case a point has no associated text\n    if(text.length>0){\n\n      gpoint.append(\"text\")\n            .attr(\"x\", x+2)\n            .attr(\"y\", y+2)\n            .attr(\"class\",\"text\")\n            .text(text);\n    }\n\n  }\n\n  // ZOOM BUTTON LOGIC ***********\n  function interpolateZoom (translate, scale) {\n      var self = this;\n      return d3.transition().duration(350).tween(\"zoom\", function () {\n          var iTranslate = d3.interpolate(zoom.translate(), translate),\n              iScale = d3.interpolate(zoom.scale(), scale);\n          return function (t) {\n              zoom\n                  .scale(iScale(t))\n                  .translate(iTranslate(t));\n              zoomAndPan(true);\n          };\n      });\n  }\n\n  function zoomClick() {\n      var clicked = d3.event.target,\n          direction = 1,\n          factor = 0.2,\n          target_zoom = 1,\n          center = [width / 2, height / 2],\n          extent = zoom.scaleExtent(),\n          translate = zoom.translate(),\n          translate0 = [],\n          l = [],\n          view = {x: translate[0], y: translate[1], k: zoom.scale()};\n\n      d3.event.preventDefault();\n      direction = (this.id === 'zoom-in') ? 1 : -1;\n      target_zoom = zoom.scale() * (1 + factor * direction);\n\n      if (target_zoom < extent[0] || target_zoom > extent[1]) { return false; }\n\n      translate0 = [(center[0] - view.x) / view.k, (center[1] - view.y) / view.k];\n      view.k = target_zoom;\n      l = [translate0[0] * view.k + view.x, translate0[1] * view.k + view.y];\n\n      view.x += center[0] - l[0];\n      view.y += center[1] - l[1];\n\n      interpolateZoom([view.x, view.y], view.k);\n  }\n\n  function resetZoom() {\n    interpolateZoom([0, 0], 1)\n  }\n\n  d3.selectAll('#projects-choropleth .zoom-button').on('click', zoomClick)\n  d3.select('#projects-choropleth .reset-button').on('click', resetZoom)\n  return chart\n}\n","import React from 'react'\n\nexport default function({ currentPage, totalPages, onPrevious, onNext }) {\n  return (\n    <div className=\"page-selector column small-8 medium-6 large-6\">\n      <div className=\"row\">\n        <div className=\"page-prev-button column small-4\" onClick={onPrevious}><span className=\"fa fa-angle-left\" /></div>\n        <div className=\"current-page column small-8\">{currentPage} of {totalPages}</div>\n        <div className=\"page-next-button column small-4\" onClick={onNext}><span className=\"fa fa-angle-right\" /></div>\n      </div>\n    </div>\n  )\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Lunr from 'lunr'\nimport PageSelector from './PageSelector'\nimport { SEARCH_FIELDS } from './SearchFields'\nimport { REGION_COLUMN_NAME, PRACTICE_AREA_COLUMN_NAMES, PRACTICE_AREA_COLUMN_NAME, PROJECT_TITLE_COLUMN_NAME, SEARCH_REFERENCE_ID_COLUMN_NAME } from '../../ColumnNames'\nimport PracticeAreaExists from '../../util/PracticeAreaExists'\n\nexport default class ProjectSearch extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      searchInput: '',\n      totalResults: [],\n      pagedResults: [],\n      currentPage: 1,\n      totalNumberOfPages: 0,\n      sortBy: { columnName: 'Project Title', order: 'asc' }\n    }\n\n    this.searchIndex = Lunr(function() {\n      this.ref(props.searchReferenceField)\n      Object.values(props.searchFields).forEach((searchField) => {\n        const fieldName = searchField.name\n        const fieldWeight = searchField.weight\n        this.field(fieldName, fieldWeight)\n      })\n      this.pipeline.remove(Lunr.stemmer)\n\n      props.projects.forEach((project) => {\n        this.add(project)\n      })\n    })\n\n    // Give 'this' scope to functions\n    this.handleChange = this.handleChange.bind(this)\n    this.getTotalResults = this.getTotalResults.bind(this)\n    this.getPagedData = this.getPagedData.bind(this)\n    this.goToNextPage = this.goToNextPage.bind(this)\n    this.goToPreviousPage = this.goToPreviousPage.bind(this)\n    this.getTotalNumberOfPages = this.getTotalNumberOfPages.bind(this)\n    this.setSort = this.setSort.bind(this)\n  }\n\n  componentWillMount() {\n    const totalResults = this.getTotalResults(this.state.searchInput, this.state.sortBy)\n    const pagedResults = this.getPagedData(totalResults, this.state.currentPage)\n    // Set the initial results set\n    this.setState({ \n      totalResults,\n      pagedResults,\n      totalNumberOfPages: this.getTotalNumberOfPages(totalResults, this.props.showCount)\n    })\n  }\n\n  getPracticeAreasMarkup(record) {\n    const practiceAreaObjects = Object.values(PRACTICE_AREA_COLUMN_NAMES).map((pa) => pa)\n    const practiceAreasForProject = practiceAreaObjects.filter((pa) => {\n      return PracticeAreaExists(pa, record)\n    })\n    let markup = practiceAreasForProject\n      .map((practiceArea, i) => {\n        const separator = (i + 1 < practiceAreasForProject.length) ? ' / ' : ''\n\n        return (\n          <span key={practiceArea['key']} className='subtitle'>{`${practiceArea['displayName']}${separator}`}</span>\n        )\n      })\n\n    if(markup.length === 0) return <span>Practice Area Unavailable</span>\n    return markup\n  }\n\n  getPagedData(data, pageNumber) {\n    if(data.length <= this.props.showCount) {\n      return data\n    }\n\n    const zeroedPageIndex = pageNumber - 1\n    const startIndex = this.props.showCount * zeroedPageIndex\n    const endIndex = startIndex + this.props.showCount\n    return data.slice(startIndex, endIndex)\n  }\n\n  // Note this function is for sorting strings\n  generateSortFunc(sortColumn, sortOrder) {\n    if(sortOrder == 'asc') {\n      return function(a, b) {\n        return a[sortColumn].localeCompare(b[sortColumn])\n      }\n    } else {\n      return function(a, b) {\n        return b[sortColumn].localeCompare(a[sortColumn])\n      }\n    }\n  }\n\n  getTotalResults(searchInput, sortBy) {\n    const resultsRefs = this.searchIndex.search(`*${searchInput}*`).map((result) => result.ref)\n    const resultsRecords = resultsRefs.map((ref) => {\n      return this.props.projects.find((project) => project[this.props.searchReferenceField] === Number(ref))\n    })\n    .sort(this.generateSortFunc(sortBy.columnName, sortBy.order))\n    return resultsRecords\n  }\n\n  resultsMarkup(resultsRecords) {\n    const resultsMarkup = resultsRecords.map((record) => {\n      return (\n        <li key={record[SEARCH_REFERENCE_ID_COLUMN_NAME]}>\n          <div className=\"column small-16\">\n            <div className=\"row\">\n              <div className=\"column\">\n                <div className=\"project-category\">{this.getPracticeAreasMarkup(record)}</div>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"column small-8 medium-10\">\n                <a href={`${record['url']}`} className=\"project-title\">{record[PROJECT_TITLE_COLUMN_NAME] || \"Project Title Unavailable\"}</a>\n              </div>\n              <div className=\"column small-8 medium-6\">\n                {record[REGION_COLUMN_NAME] || \"Region Unavailable\"}\n              </div>\n            </div>\n          </div>\n        </li>\n      )\n    })\n    return resultsMarkup\n  }\n\n  handleChange(event) {\n    const searchInput = event.target.value\n    const totalResults = this.getTotalResults(searchInput, this.state.sortBy)\n    let currentPage = this.state.currentPage\n    const totalNumberOfPages = this.getTotalNumberOfPages(totalResults, this.props.showCount)\n    // If the user is searching, then make sure that the current page number does not go over the new totalNumberOfPages for this new totalResults set\n    if(currentPage > totalNumberOfPages) currentPage = totalNumberOfPages\n    // If the current page was 0, but now there are results again and totalNumberOfPages is not zero anymore\n    // Then move the user to the first page\n    if(currentPage === 0 && totalNumberOfPages > 0) currentPage = 1\n    const pagedResults = this.getPagedData(totalResults, currentPage)\n\n    this.setState({ \n      searchInput,\n      totalResults,\n      pagedResults,\n      totalNumberOfPages,\n      currentPage\n    })\n  }\n\n  goToPreviousPage() {\n    const prevPageExists = (this.state.currentPage > 1)\n    if(prevPageExists) {\n      const updatedCurrentPage = this.state.currentPage - 1\n      const pagedResults = this.getPagedData(this.state.totalResults, updatedCurrentPage)\n      this.setState({ \n        currentPage: updatedCurrentPage,\n        pagedResults\n      })\n    }\n  }\n\n  getTotalNumberOfPages(data, pageCapacity) {\n    return Math.ceil(data.length / pageCapacity)\n  }\n\n  goToNextPage() {\n    const nextPageExists = (this.state.currentPage < this.getTotalNumberOfPages(this.state.totalResults, this.props.showCount))\n    if(nextPageExists) {\n      const updatedCurrentPage = this.state.currentPage + 1\n      const pagedResults = this.getPagedData(this.state.totalResults, updatedCurrentPage)\n      this.setState({ \n        currentPage: updatedCurrentPage,\n        pagedResults\n      })\n    }\n  }\n\n  setSort(sortColumn) {\n    if(this.state.sortBy.order === 'asc') {\n      const sortBy = { columnName: sortColumn, order: 'desc' }\n      const totalResults = this.getTotalResults(this.state.searchInput, sortBy)\n      const pagedResults = this.getPagedData(totalResults, this.state.currentPage)\n      this.setState({\n        sortBy,\n        totalResults,\n        pagedResults\n      })\n    } else if(this.state.sortBy.order === 'desc') {\n      const sortBy = { columnName: sortColumn, order: 'asc' }\n      const totalResults = this.getTotalResults(this.state.searchInput, sortBy)\n      const pagedResults = this.getPagedData(totalResults, this.state.currentPage)\n      this.setState({\n        sortBy,\n        totalResults,\n        pagedResults\n      })\n    }\n  }\n\n  getSortArrow(columnName) {\n    const sortBy = this.state.sortBy\n    if(sortBy.columnName !== columnName) {\n      return ''\n    } else {\n      if(sortBy.order === 'asc') {\n        return <span className=\"sort-caret fa fa-caret-up\"></span>\n      } else if(sortBy.order === 'desc') {\n        return <span className=\"sort-caret fa fa-caret-down\"></span>\n      }\n    }\n  }\n\n  render() {\n    let searchResultsMarkup = this.resultsMarkup(this.state.pagedResults)\n    if(searchResultsMarkup.length === 0) searchResultsMarkup = <span>No Projects found</span>\n\n    return (\n      <div>\n        <div className=\"background-lighterBlue\">\n          <div className=\"row row--gutters column projects-search\">\n            <h2>Search our project database</h2>\n            <label>\n              <span className=\"sr-only\">Search Projects</span>\n              <span className=\"fa fa-search\" aria-hidden=\"true\"></span>\n              <input type=\"text\" placeholder=\"Search Projects\" value={this.state.value} onChange={this.handleChange}/>\n            </label>\n          </div>\n        </div>\n        <div className=\"row row--gutters column projects-list\">\n          <div className=\"column background-lighterBlue project-results-header\">\n            <div className=\"row\">\n              <div className=\"column small-8 medium-10\"><a onClick={() => this.setSort('Project Title')}>Project{this.getSortArrow('Project Title')}</a></div>\n              <div className=\"column small-8 medium-6\"><a onClick={() => this.setSort('Region')}>Region{this.getSortArrow('Region')}</a></div>\n            </div>\n          </div>\n          <div className=\"overflow-container\">\n            <ul>\n              {searchResultsMarkup}\n            </ul>\n          </div>\n          <div className=\"row\">\n            <PageSelector currentPage={this.state.currentPage} totalPages={this.getTotalNumberOfPages(this.state.totalResults, this.props.showCount)} onPrevious={this.goToPreviousPage} onNext={this.goToNextPage} />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nProjectSearch.propTypes = {\n  projects: PropTypes.arrayOf(PropTypes.object),\n  searchReferenceField: PropTypes.string,\n  showCount: PropTypes.number\n}\n\nProjectSearch.defaultProps = {\n  searchReferenceField: SEARCH_REFERENCE_ID_COLUMN_NAME,\n  searchFields: SEARCH_FIELDS,\n  showCount: 10\n}\n","import { COUNTRY_COLUMN_NAME, PROJECT_TITLE_COLUMN_NAME, BRIEF_DESCRIPTION_COLUMN_NAME, REGION_COLUMN_NAME } from '../../ColumnNames'\n\nconst SEARCH_FIELDS = {\n  PROJECT_TITLE: { name: PROJECT_TITLE_COLUMN_NAME, weight: 100 },\n  REGION: { name: REGION_COLUMN_NAME, weight: 50}\n}\n\nexport { SEARCH_FIELDS }\n","export { default } from './ProjectSearch'\n","import React, { Component } from 'react'\nimport { BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, Brush } from 'recharts'\nimport lodash from 'lodash'\nimport { reduceSum } from '../util/Reduce'\nimport { PRACTICE_AREAS } from '../ColumnNames'\nimport d3 from 'd3'\n\nconst sortStringsAsc = (a, b) => {\n  const aLower = a.toLowerCase()\n  const bLower = b.toLowerCase()\n  if(aLower < bLower) return -1\n  if(aLower > bLower) return 1\n  return 0\n}\n\nconst addWhiteTopBorders = () => {\n  d3.selectAll('.recharts-bar-rectangle path').attr('stroke-dasharray', function(d) { \n    var node = d3.select(this); \n    var width = node.attr('width');\n    var height = node.attr('height');\n    var topBorder = width;\n    var emptyBorder = width + (2 * height);\n    var dashArray = width + ',' + emptyBorder;\n    return dashArray\n  })\n  .attr('stroke', 'white')\n  .attr('stroke-width', '2px')\n}\n\nconst TooltipContent = function({ active, type, payload, label, xAxisDataKey, colorMapper, tooltipValueFormatter, showTotal }) {\n  if(!active) return null\n  const hoverData = payload[0].payload\n  const xAxisValue = hoverData[xAxisDataKey]\n  const stackData = Object.keys(hoverData).sort(sortStringsAsc)\n    .filter((key) => key !== xAxisDataKey)\n    .filter((key) => {\n      if (!showTotal) {\n        return key !== 'Total'\n      }\n      return key === 'Total'\n    })\n    .map((stackDataName) => {\n      return { \n        name: stackDataName,\n        value: hoverData[stackDataName],\n        color: colorMapper[stackDataName]\n      }\n    })\n    .filter((slice) => {\n      \n      return slice.value > 0\n    })\n\n  const stackContent = stackData.map((slice) => {\n    return (\n      <div key={`${xAxisValue}-${slice.name}`} className='stack-slice-content'>\n        <svg width={20} height={20}><circle cx={10} cy={10} r={10} fill={slice.color} /></svg>\n        <span className='stack-slice-name'>{slice.name}</span>\n        <div className='stack-slice-value'>{tooltipValueFormatter(slice.value)}</div>\n      </div>\n    )\n  })\n\n  return (\n    <div className='tt-content' style={{ width: 350, height: 'auto' }}>\n      <div className='tt-title'>{xAxisValue}</div>\n      <div className='tt-label'>{hoverData.name}</div>\n      {stackContent}\n    </div>\n  )\n}\n\nexport default class StackedBarChart extends Component {\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n    addWhiteTopBorders()\n  }\n\n  componentDidUpdate() {\n    addWhiteTopBorders()\n  }\n\n  render() {\n    const { width, height, data, xAxisDataKey, stackDataKey, colorPalette, valueKey = 'value', tickFormatter, tooltipValueFormatter, showTotal = false } = this.props\n    const colorsDarkToLight = colorPalette.colors.slice(0).reverse() // Clone then reverse\n    const xGrouping = lodash.groupBy(data, xAxisDataKey)\n    const xGroupingWithSums = lodash.mapValues(xGrouping, (collectionForXGroup) => {\n      const stackGrouping = lodash.groupBy(collectionForXGroup, stackDataKey)\n      const stackGroupingWithSums = reduceSum(stackGrouping, valueKey)\n      return stackGroupingWithSums\n    })\n    const xGroupingSumsTotalled = lodash.mapValues(xGroupingWithSums, (sumObject) => {\n      const total = Object.keys(sumObject).reduce((accumulator, sumKey) => accumulator += sumObject[sumKey], 0)\n      return total\n    })\n    const xAxisGroupedByTotals = lodash.invert(xGroupingSumsTotalled)\n    const xAxisDataKeyForSorting = xAxisDataKey + '-sort-key'\n    const flattenedGroupings = Object.entries(xGroupingWithSums).map(([xName, stackGrouping]) => Object.assign({ [xAxisDataKey]: xName }, stackGrouping, { Total: xGroupingSumsTotalled[xName]})).sort((a, b) => b.Total - a.Total)\n\n    const stackDataNamesAsc = lodash.uniqBy(data, stackDataKey)\n    .map((d) => d[stackDataKey])\n    .sort(sortStringsAsc)\n    const colorMapper = {}\n    stackDataNamesAsc.forEach((name, index) => colorMapper[name] = colorsDarkToLight[index])\n    const stackDataNamesDesc = stackDataNamesAsc.slice(0).reverse() // Clone and then reverse\n    const stackedBar = stackDataNamesDesc.map((name, stackIndex) => {\n      return (\n        <Bar key={`bar-${name}`} dataKey={name} stackId='samestack' isAnimationActive={false} >\n          {\n            flattenedGroupings.map((element, index) => (\n              <Cell \n                key={`stacked-bar-${element.region}-${index}`} \n                fill={colorMapper[name]}\n              />\n            ))\n          }\n        </Bar>\n      )\n    })\n    const legendData = stackDataNamesAsc.map((name, index) => ({ id: name, value: name, color: colorMapper[name] }))\n\n    return (\n      <BarChart width={width} height={height} data={flattenedGroupings} margin={{top: 20, right: 0, bottom: 0, left: -20}}>\n        <CartesianGrid vertical={false} strokeDasharray=\"1 1\" strokeWidth={2} />\n        <XAxis dataKey={xAxisDataKey} interval={0}/>\n        <YAxis tickFormatter={tickFormatter} />\n        <Tooltip \n          cursor={{ stroke: '#ddd', strokeWidth: 1, fill: 'none' }} \n          content={<TooltipContent colorMapper={colorMapper} xAxisDataKey={xAxisDataKey} tooltipValueFormatter={tooltipValueFormatter} showTotal={showTotal} />} \n        />\n        <Legend iconType='circle' payload={legendData} />\n      {stackedBar}\n      </BarChart>\n    )\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport qdFormatters from 'qd-formatters'\nimport CountUp from 'react-countup'\nimport Sizebox from 'react-sizebox'\nimport BreakDownPanel from './components/BreakdownPanel'\nimport StackedBarChart from './components/StackedBarChart'\nimport ColorPalette from './util/ColorPalette'\nimport ColorScale from './util/ColorScale'\nimport d3 from 'd3'\nimport lodash from 'lodash'\nimport * as topojson from 'topojson'\nimport { PRACTICE_AREA_COLUMN_NAMES, PRACTICE_AREA_COLUMN_NAME, COUNTRY_COLUMN_NAME, REGION_COLUMN_NAME, PARTNER_COLUMN_NAME, CONTRACT_VALUE_COLUMN_NAME, SEARCH_REFERENCE_ID_COLUMN_NAME, ISO_3_COlUMN_NAME } from './ColumnNames'\nimport { reduceSum, reduceCount, reduceCountIncludeExtraData } from './util/Reduce'\nimport D3Choropleth from './components/D3Choropleth'\nimport ProjectSearch from './components/ProjectSearch'\nimport PracticeAreaExists from './util/PracticeAreaExists'\nimport slugify from 'slugify'\n\nconst formatters = qdFormatters(d3)\n\n// Make sure each record only has one practice area\n// We need this in order to group by practice area because the original data can have multiple practice areas per record\nconst denormalizePracticeAreas = (data) => {\n  let denormalizedData = []\n  const practiceAreas = Object.values(PRACTICE_AREA_COLUMN_NAMES)\n  practiceAreas.forEach((practiceArea) => {\n    const dataFilteredByPracticeArea = data.filter(project => {\n      return PracticeAreaExists(practiceArea, project)\n    })\n    const dataWithSinglePracticeArea = dataFilteredByPracticeArea.map(project => Object.assign({}, project, { denormalizedPracticeArea: practiceArea['displayName']}))\n    denormalizedData = denormalizedData.concat(dataWithSinglePracticeArea)\n  })\n  let nonePracticeAreas = data.filter(project => {\n    var foundSomePracticeArea = practiceAreas.some((practiceArea) => {\n      return PracticeAreaExists(practiceArea, project)\n    })\n    return !foundSomePracticeArea\n  })\n  .map(project => Object.assign({}, project, { denormalizedPracticeArea: 'None' }))\n\n  return denormalizedData // .concat(nonePracticeAreas) // Unecessary to include None as a practice area\n}\n\nconst chartDataFormat = (groupedValues) => {\n  const nameValueArray = Object.entries(groupedValues).map(([name, value]) => ({ name, value }))\n  return lodash.sortBy(nameValueArray, ['value']).slice(0).reverse()\n}\nconst choroplethDataFormat = (groupedValues) => {\n  const flattenedArray = []\n  Object.keys(groupedValues).forEach((iso3Code) => {\n    const country = { name: iso3Code, value: groupedValues[iso3Code] }\n    flattenedArray.push(country)\n  })\n  return flattenedArray\n}\nconst choroplethTooltipFunc = (datum) => {\n  if(datum.noDataFound) {\n    if(datum.noGeoDataFound) {\n      return `No data found for Country`\n    }\n    return `${datum.geoData.properties.name}<br/>0 solutions`\n  }\n  return`${datum.geoData.properties.name}<br/>${datum.value} solutions`\n}\n\n// A Project has multiple solutions\n// A solution is a Project in a country, eg: a Project in 3 countries is equivalent to 3 solutions\nconst denormalizeProjectsIntoSolutions = (projects) => {\n  const solutions = []\n  projects.forEach((p) => {\n    if(p[ISO_3_COlUMN_NAME].length === 0) {\n      solutions.push(p)\n    } else {\n      p[ISO_3_COlUMN_NAME].forEach((isoCode) => {\n        const solution = Object.assign({}, p, { [ISO_3_COlUMN_NAME]: isoCode })\n        solutions.push(solution)\n      })\n    }\n  })\n\n  return solutions\n}\n\nconst goToPracticeArea = (name) => {\n  window.location.href = `/our-practices/${slugify(name)}`\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const projects = JEKYLL_DATA.projectsData.map((d, i) => {\n    return Object.assign({}, d, { [SEARCH_REFERENCE_ID_COLUMN_NAME]: i })\n  })//.filter((p) => p[REGION_COLUMN_NAME].indexOf('Latin') === -1) // Remove latin america to see how stacked bar chart looks\n  const solutions = denormalizeProjectsIntoSolutions(projects) \n  const totalSolutions = solutions.length\n  const totalPartners = Object.keys(lodash.groupBy(projects, PARTNER_COLUMN_NAME)).length\n  const totalMoney = formatters.bigCurrencyFormat(projects.reduce((acc, next) => {\n    // Important that we iterate over 'projects' and not 'solutions', solutions would be double counting money\n    const contractValue = Number(next[CONTRACT_VALUE_COLUMN_NAME])\n    if(isNaN(contractValue)) return acc\n    return acc + Number(next[CONTRACT_VALUE_COLUMN_NAME])\n  }, 0))\n  const solutionsGroupedByCountry = lodash.groupBy(solutions, ISO_3_COlUMN_NAME)\n  const totalCountries = Object.keys(solutionsGroupedByCountry).filter((isoCode) => isoCode !== \"\").length // Don't include countries that are unknown or global\n  const projectsGroupedByRegion = lodash.groupBy(projects, REGION_COLUMN_NAME)\n  const solutionsGroupedByRegion = lodash.groupBy(solutions, REGION_COLUMN_NAME)\n  const countriesInRegions = lodash.mapValues(solutionsGroupedByRegion, (sgbr) => lodash.uniqBy(sgbr, ISO_3_COlUMN_NAME).length)\n  const projectsDenormalizedByPracticeArea = denormalizePracticeAreas(projects)\n  const solutionsDenormalizedByPracticeArea = denormalizePracticeAreas(solutions)\n  const projectsGroupedByPracticeArea = lodash.groupBy(projectsDenormalizedByPracticeArea, 'denormalizedPracticeArea')\n  const solutionsGroupedByPracticeArea = lodash.groupBy(solutionsDenormalizedByPracticeArea, 'denormalizedPracticeArea')\n  const solutionCountsForCountries = reduceCount(solutionsGroupedByCountry)\n\n  const choroplethData = choroplethDataFormat(solutionCountsForCountries)\n  const getCountryColor = (datum) => {\n    return ChoroplethColorScale.getColorFor(datum.value)\n  }\n  const ChoroplethColorScale = new ColorScale(choroplethData, ColorPalette.colors, ColorPalette.noDataColor)\n  d3.json(\"/assets/data/countries.topo.json\", function(error, world) {\n\n    const countriesTopo = topojson.feature(world, world.objects.countries).features;\n\n    const projectsChoropleth = D3Choropleth('projects-choropleth')\n      .topojson(countriesTopo)\n      .data(choroplethData)\n      .colorPalette(ColorPalette)\n      .tooltipContent(choroplethTooltipFunc)\n      .numberFormatter(formatters.numberFormat)\n      .draw()\n  });\n\n  const pbpaPanel = (\n    <BreakDownPanel\n      data={chartDataFormat(reduceCount(solutionsGroupedByPracticeArea))}\n      bigNumber={totalSolutions}\n      colorPalette={ColorPalette}\n      title='Solutions'\n      groupTitle='Practice Area'\n      valueTitle='Solutions'\n      onRowClick={goToPracticeArea}\n    />\n  )\n  const pbrPanel = (\n    <BreakDownPanel\n      data={chartDataFormat(countriesInRegions)}\n      bigNumber={totalCountries}\n      colorPalette={ColorPalette}\n      title='Countries'\n      groupTitle='Region'\n      valueTitle='Countries'\n    />\n  )\n\n  const stackedBarChart = (\n    <Sizebox className=\"stacked-bar-chart-sizebox\">\n      <StackedBarChart\n        data={projectsDenormalizedByPracticeArea}\n        xAxisDataKey={REGION_COLUMN_NAME}\n        stackDataKey={'denormalizedPracticeArea'}\n        colorPalette={ColorPalette}\n        valueKey={CONTRACT_VALUE_COLUMN_NAME}\n        tickFormatter={formatters.bigCurrencyFormat}\n        tooltipValueFormatter={formatters.currencyFormat}\n      />\n    </Sizebox>\n  )\n\n  ReactDOM.render(\n    <CountUp start={0} end={totalSolutions} duration={3} />,\n    document.getElementById('projects-count')\n  )\n\n  ReactDOM.render(\n    <CountUp start={0} end={totalCountries} duration={3} />,\n    document.getElementById('countries-count')\n  )\n\n  ReactDOM.render(\n    <CountUp start={0} end={totalPartners} duration={3} />,\n    document.getElementById('partners-count')\n  )\n\n  ReactDOM.render(\n    <span>{totalMoney}</span>,\n    document.getElementById('total-money')\n  )\n\n  ReactDOM.render(\n    pbpaPanel,\n    document.getElementById('projects-by-practice-area')\n  )\n\n  ReactDOM.render(\n    pbrPanel,\n    document.getElementById('projects-by-region')\n  )\n\n  ReactDOM.render(\n    stackedBarChart,\n    document.getElementById('contract-value')\n  )\n\n  ReactDOM.render(\n    <ProjectSearch projects={projects} />,\n    document.getElementById('project-search')\n  )\n\n})\n","// Dummy data\n\nconst projectsByPracticeArea = [\n  { name: 'Monitoring and Evaluation', value: 184 },\n  { name: 'Public Financial Management and Fiscal Sustainability', value: 123 },\n  { name: 'Knowledge Management and Data Analytics', value: 85 },\n  { name: 'Education, Gender and Youth', value: 37 },\n  { name: 'Energy and Environment', value: 12 },\n  { name: 'Security, Transparency, and Governence', value: 4 }\n]\n\nconst projectsByRegion = [\n  { name: 'East Asia & Oceania', value: 184 },\n  { name: 'Middle East & North Africa', value: 123 },\n  { name: 'South & Central Asia', value: 85 },\n  { name: 'Sub-Saharan Africa', value: 37 },\n  { name: 'Western Hemisphere', value: 12 },\n  { name: 'World', value: 9 }\n]\n\nconst practiceAreas = [\n  'Monitoring and Evaluation', \n  'Public Financial Management and Fiscal Sustainability', \n  'Knowledge Management and Data Analytics',\n  'Education, Gender and Youth',\n  'Energy and Environment',\n  'Security, Transparency, and Governance'\n]\n\nconst regionAndPracAreas = [\n  { region: 'East Asia & Oceania', practiceArea: 'Monitoring and Evaluation', value: 100 },\n  { region: 'East Asia & Oceania', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 300 },\n  { region: 'East Asia & Oceania', practiceArea: 'Knowledge Management and Data Analytics', value: 80 },\n  { region: 'East Asia & Oceania', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'East Asia & Oceania', practiceArea: 'Energy and Environment', value: 80 },\n  { region: 'East Asia & Oceania', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n\n  { region: 'Middle East & North Africa', practiceArea: 'Monitoring and Evaluation', value: 500 },\n  { region: 'Middle East & North Africa', practiceArea: 'Public Financial Management and Fiscal Sustainability', value:440 },\n  { region: 'Middle East & North Africa', practiceArea: 'Knowledge Management and Data Analytics', value: 400 },\n  { region: 'Middle East & North Africa', practiceArea: 'Education, Gender and Youth', value: 230 },\n  { region: 'Middle East & North Africa', practiceArea: 'Energy and Environment', value: 200 },\n  { region: 'Middle East & North Africa', practiceArea: 'Security, Transparency, and Governance', value: 80 },\n\n  { region: 'South & Central Asia', practiceArea: 'Monitoring and Evaluation', value: 550 },\n  { region: 'South & Central Asia', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 },\n  { region: 'South & Central Asia', practiceArea: 'Knowledge Management and Data Analytics', value: 350 },\n  { region: 'South & Central Asia', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'South & Central Asia', practiceArea: 'Energy and Environment', value: 100 },\n  { region: 'South & Central Asia', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n\n  { region: 'Sub-Saharan Africa', practiceArea: 'Monitoring and Evaluation', value: 550 },\n  { region: 'Sub-Saharan Africa', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 },\n  { region: 'Sub-Saharan Africa', practiceArea: 'Knowledge Management and Data Analytics', value: 350 },\n  { region: 'Sub-Saharan Africa', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'Sub-Saharan Africa', practiceArea: 'Energy and Environment', value: 100 },\n  { region: 'Sub-Saharan Africa', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n\n  { region: 'Western Hemisphere', practiceArea: 'Monitoring and Evaluation', value: 550 },\n  { region: 'Western Hemisphere', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 },\n  { region: 'Western Hemisphere', practiceArea: 'Knowledge Management and Data Analytics', value: 350 },\n  { region: 'Western Hemisphere', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'Western Hemisphere', practiceArea: 'Energy and Environment', value: 100 },\n  { region: 'Western Hemisphere', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n\n  { region: 'World', practiceArea: 'Monitoring and Evaluation', value: 550 },\n  { region: 'World', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 },\n  { region: 'World', practiceArea: 'Knowledge Management and Data Analytics', value: 350 },\n  { region: 'World', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'World', practiceArea: 'Energy and Environment', value: 100 },\n  { region: 'World', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n\n  { region: 'Others', practiceArea: 'Monitoring and Evaluation', value: 550 },\n  { region: 'Others', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 },\n  { region: 'Others', practiceArea: 'Knowledge Management and Data Analytics', value: 350 },\n  { region: 'Others', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'Others', practiceArea: 'Energy and Environment', value: 100 },\n  { region: 'Others', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n]\n\nexport { regionAndPracAreas, practiceAreas }\n","export default {\n  colors: [\n    '#62AFD1',\n    '#3D98C3',\n    '#297DA6',\n    '#1F5D7B',\n    '#173F53',\n    '#0E242F'\n  ],\n  noDataColor: '#cae0ea'\n}\n","import d3 from 'd3'\n\nexport default class ColorScale {\n  constructor(data, colors, noDataColor = \"#ddd\", valueAccessorFunc = (d) => d.value, scaleType = 'quantize', customDomain) {\n    this.data = data\n    this.colors = colors\n    this.noDataColor = noDataColor\n    this.valueAccessorFunc = valueAccessorFunc\n    this.scaleType = scaleType\n    this.customDomain = customDomain\n\n    // Setup the scale based on scale type\n    if(scaleType === 'quantize') { // Calculate the colors based on a linear quantize domain\n      this.scale = d3.scale.quantize()\n    }\n    else if(scaleType === \"quantile\") { // Calculate the colors by n domain sections(similar to quartiles but of n sections)\n      this.scale = d3.scale.quantile()\n    }\n    this.scale.domain(this.calculateDomain())\n      .range(colors)\n  }\n\n  calculateDomain() {\n    if(this.customDomain) {\n      return this.customDomain\n    }\n    else if(this.scaleType === 'quantize') {\n      // Standard min/max domain for linear quantize scale\n      return [d3.min(this.data, this.valueAccessorFunc), d3.max(this.data, this.valueAccessorFunc)]\n    }\n    else if(this.scaleType === 'quantile') {\n      // If the user didn't specify a list of quantiles using the customDomain\n      // then use the data itself as the quantiles\n      return this.data.map(this.valueAccessorFunc)\n    }\n    \n  }\n\n  setDomain() {\n    this.scale.domain(this.calculateDomain())\n  }\n\n  setData(data) {\n    this.data = data\n  }\n\n  getColorFor(value) {\n    if(value === undefined) {\n      return this.noDataColor\n    }\n    return this.scale(value)\n  }\n}\n","// Make practice area names nicer looking to read\n\nconst PracticeAreaTitle = (practiceArea) => {\n  return practiceArea.replace('Practice Area', '')\n}\n\nexport { PracticeAreaTitle }\n","import { PRACTICE_AREA_COLUMN_NAME } from '../ColumnNames'\n\nconst PracticeAreaExists = (practiceArea, project) => {\n  const practiceAreasForProject = project[PRACTICE_AREA_COLUMN_NAME]\n  return practiceAreasForProject.indexOf(practiceArea['displayName']) !== -1\n}\n\nexport default PracticeAreaExists\n","import lodash from 'lodash'\n\nconst reduceSum = (grouping, valueKey) => {\n  return lodash.mapValues(grouping, (recordsInGroup) => {\n    return recordsInGroup.reduce((accumulator, next) => {\n      const nextValue = Number(next[valueKey])\n      if(isNaN(nextValue)) {\n        console.warn('Tried to reduce with a non numeric value: ' + next[valueKey])\n        console.warn('Using zero as the value instead')\n        return accumulator += 0\n      }\n      return accumulator += Number(next[valueKey])\n    }, 0)\n  })\n}\n\nconst reduceCount = (grouping) => {\n  return lodash.mapValues(grouping, (recordsInGroup) => recordsInGroup.length)\n}\n\nconst reduceCountIncludeExtraData = (grouping, generateExtraData) => {\n  return lodash.mapValues(grouping, (recordsInGroup) => {\n    const extraData = generateExtraData(recordsInGroup)\n    const countWithExtra = Object.assign({ count: recordsInGroup.length }, extraData)\n    return countWithExtra\n  })\n}\nexport { reduceSum, reduceCount, reduceCountIncludeExtraData }\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}
>>>>>>> master
