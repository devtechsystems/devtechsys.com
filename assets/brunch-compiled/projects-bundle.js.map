{"version":3,"sources":["assets/js/projects/ColumnNames.js","assets/js/projects/components/BreakdownPanel/PieChart.js","assets/js/projects/components/BreakdownPanel/RowChart/DefaultRow.js","assets/js/projects/components/BreakdownPanel/RowChart/RowChart.js","assets/js/projects/components/BreakdownPanel/RowChart/index.js","assets/js/projects/components/BreakdownPanel/index.js","assets/js/projects/components/D3Choropleth.js","assets/js/projects/components/ProjectSearch/PageSelector.js","assets/js/projects/components/ProjectSearch/ProjectSearch.js","assets/js/projects/components/ProjectSearch/SearchFields.js","assets/js/projects/components/ProjectSearch/index.js","assets/js/projects/components/StackedBarChart.js","assets/js/projects/entry.js","assets/js/projects/test/Data.js","assets/js/projects/util/ColorPalette.js","assets/js/projects/util/ColorScale.js","assets/js/projects/util/Humanify.js","assets/js/projects/util/PracticeAreaExists.js","assets/js/projects/util/Reduce.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["ENUMERATED_COLUMN_NAMES","JEKYLL_DATA","enumeratedColumnNames","PRACTICE_AREA_COLUMN_NAMES","enumeratedPracticeAreas","COUNTRY_COLUMN_NAME","REGION_COLUMN_NAME","PARTNER_COLUMN_NAME","PROJECT_TITLE_COLUMN_NAME","CONTRACT_VALUE_COLUMN_NAME","ID_COLUMN_NAME","PRACTICE_AREA_COLUMN_NAME","SEARCH_REFERENCE_ID_COLUMN_NAME","ISO_3_COlUMN_NAME","width","height","data","title","colorScale","outerRadius","innerRadius","map","element","index","name","getColorFor","value","TooltipContent","active","type","payload","label","valueName","hoverData","defaultNameRenderer","x","y","fontSize","refFunc","onRowClick","RadRow","props","state","showEllipses","textWidth","nameTextElement","getBoundingClientRect","availableWidthForName","setState","chartWidth","widthForCircle","getCircleRadius","circlePaddingRight","rowHeight","heightForText","datum","xScale","nameRenderer","barWidth","textValueClassNames","barHeight","circleRadius","barY","ellipsesXAdjustment","ellipses","spaceForValueText","color","textElement","propTypes","number","shape","string","arrayOf","func","defaultProps","console","log","RowChart","length","scrollbarWidth","svgHeight","maxValue","max","d","scale","linear","domain","range","rows","i","Row","row","svgWidth","colorMapper","containerStyles","overflow","className","default","bigNumber","colorPalette","groupTitle","valueTitle","colors","noDataColor","parentSelector","chart","d3","select","window","on","throttle","zoom","behavior","scaleExtent","zoomAndPan","document","getElementById","offsetWidth","parentHeight","offsetHeight","center","projection","path","svg","g","_topojson","_data","_colorScale","_colorPalette","_colorMapper","_valueAccessor","undefined","_tooltipContent","_numberFormatter","Math","round","tooltip","append","attr","setup","geo","mercator","translate","PI","call","click","setupColorMapper","addLegend","legendBottomOffset","legend","classed","text","keyContainer","legendColors","slice","reverse","push","keyRow","selectAll","enter","getLegendValueRange","colorValueRange","invertExtent","ceil","floor","numberFormatter","_","topojson","tooltipContent","getDatum","key","find","geoDatum","id","noDataFound","noGeoDataFound","Object","assign","geoData","getDataValue","draw","country","insert","properties","style","offsetL","offsetLeft","offsetT","offsetTop","mouse","node","parseInt","html","redraw","remove","zoomFromButton","t","event","s","h","min","throttleTimer","clearTimeout","setTimeout","latlon","invert","addpoint","lon","lat","gpoint","interpolateZoom","self","transition","duration","tween","iTranslate","interpolate","iScale","zoomClick","clicked","target","direction","factor","target_zoom","extent","translate0","l","view","k","preventDefault","resetZoom","currentPage","totalPages","onPrevious","onNext","ProjectSearch","searchInput","totalResults","pagedResults","totalNumberOfPages","sortBy","columnName","order","searchIndex","ref","searchReferenceField","values","searchFields","forEach","searchField","fieldName","fieldWeight","weight","field","pipeline","stemmer","projects","project","add","handleChange","bind","getTotalResults","getPagedData","goToNextPage","goToPreviousPage","getTotalNumberOfPages","setSort","showCount","record","practiceAreaObjects","pa","practiceAreasForProject","filter","markup","practiceArea","separator","pageNumber","zeroedPageIndex","startIndex","endIndex","sortColumn","sortOrder","a","b","localeCompare","resultsRefs","search","result","resultsRecords","Number","sort","generateSortFunc","resultsMarkup","getPracticeAreasMarkup","prevPageExists","updatedCurrentPage","pageCapacity","nextPageExists","searchResultsMarkup","getSortArrow","object","SEARCH_FIELDS","PROJECT_TITLE","REGION","sortStringsAsc","aLower","toLowerCase","bLower","addWhiteTopBorders","topBorder","emptyBorder","dashArray","xAxisDataKey","tooltipValueFormatter","showTotal","xAxisValue","stackData","keys","stackDataName","stackContent","StackedBarChart","stackDataKey","valueKey","tickFormatter","colorsDarkToLight","xGrouping","groupBy","xGroupingWithSums","mapValues","collectionForXGroup","stackGrouping","stackGroupingWithSums","xGroupingSumsTotalled","sumObject","total","reduce","accumulator","sumKey","xAxisGroupedByTotals","xAxisDataKeyForSorting","flattenedGroupings","entries","xName","Total","stackDataNamesAsc","uniqBy","stackDataNamesDesc","stackedBar","stackIndex","region","legendData","top","right","bottom","left","stroke","strokeWidth","fill","formatters","process","env","NODE_ENV","warn","denormalizePracticeAreas","denormalizedData","practiceAreas","dataFilteredByPracticeArea","dataWithSinglePracticeArea","denormalizedPracticeArea","concat","nonePracticeAreas","foundSomePracticeArea","some","chartDataFormat","groupedValues","nameValueArray","choroplethDataFormat","flattenedArray","iso3Code","choroplethTooltipFunc","denormalizeProjectsIntoSolutions","solutions","p","isoCode","solution","goToPracticeArea","location","href","addEventListener","projectsData","totalSolutions","totalPartners","totalMoney","bigCurrencyFormat","acc","next","contractValue","isNaN","solutionsGroupedByCountry","totalCountries","projectsGroupedByRegion","solutionsGroupedByRegion","countriesInRegions","sgbr","projectsDenormalizedByPracticeArea","solutionsDenormalizedByPracticeArea","projectsGroupedByPracticeArea","solutionsGroupedByPracticeArea","solutionCountsForCountries","choroplethData","getCountryColor","ChoroplethColorScale","json","error","world","countriesTopo","feature","objects","countries","features","projectsChoropleth","numberFormat","pbpaPanel","pbrPanel","stackedBarChart","currencyFormat","render","projectsByPracticeArea","projectsByRegion","regionAndPracAreas","ColorScale","valueAccessorFunc","scaleType","customDomain","quantize","quantile","calculateDomain","PracticeAreaTitle","replace","PracticeAreaExists","indexOf","reduceSum","grouping","recordsInGroup","nextValue","reduceCount","reduceCountIncludeExtraData","generateExtraData","extraData","countWithExtra","count","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","url","date","Date","now","toString","browser","navigator","userAgent","forceRepaint","reloaders","page","reload","stylesheet","querySelectorAll","link","val","getAttribute","body","javascript","scripts","textScripts","script","srcScripts","src","loaded","all","onLoad","eval","newScript","createElement","async","onload","head","appendChild","port","host","server","hostname","connect","connection","onmessage","message","reloader","onerror","readyState","close","onclose"],"mappings":"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","file":"assets/brunch-compiled/projects-bundle.js","sourcesContent":["import lodash from 'lodash'\n\nconst ENUMERATED_COLUMN_NAMES = JEKYLL_DATA.enumeratedColumnNames\nconst PRACTICE_AREA_COLUMN_NAMES = JEKYLL_DATA.enumeratedPracticeAreas\nconst COUNTRY_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['COUNTRY']\nconst REGION_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['REGION']\nconst PARTNER_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['PARTNER']\nconst PROJECT_TITLE_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['PROJECT_TITLE']\nconst CONTRACT_VALUE_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['CONTRACT_VALUE']\nconst ID_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['DATA_ID']\nconst PRACTICE_AREA_COLUMN_NAME = ENUMERATED_COLUMN_NAMES['PRACTICE_AREA']\nconst SEARCH_REFERENCE_ID_COLUMN_NAME = 'search_ref_id'\nconst ISO_3_COlUMN_NAME = ENUMERATED_COLUMN_NAMES['ISO3_CODE']\n\nexport { \n  PRACTICE_AREA_COLUMN_NAME,\n  PRACTICE_AREA_COLUMN_NAMES,\n  COUNTRY_COLUMN_NAME,\n  PROJECT_TITLE_COLUMN_NAME,\n  ID_COLUMN_NAME,\n  REGION_COLUMN_NAME,\n  PARTNER_COLUMN_NAME,\n  CONTRACT_VALUE_COLUMN_NAME,\n  SEARCH_REFERENCE_ID_COLUMN_NAME,\n  ISO_3_COlUMN_NAME\n}\n","import React from 'react'\nimport { PieChart, Pie, Cell, Tooltip } from 'recharts'\n\nconst TooltipContent = function({ active, type, payload, label, valueName }) {\n  if(!active) return null\n  const hoverData = payload[0].payload\n  return (\n    <div className='tt-content' style={{ width: 200, height: 'auto' }}>\n      <div className='tt-label'>{hoverData.name}</div>\n      {hoverData.value} {valueName}\n    </div>\n  )\n}\n\nexport default function({ width, height, data, title, colorScale }) {\n  const outerRadius = (width > height) ? height / 2 : width / 2\n  const innerRadius = outerRadius * .4\n  return (\n    <PieChart width={width} height={height} className='breakdown-pie'>\n      <Tooltip content={<TooltipContent valueName={title} />} />\n      <Pie\n        dataKey='value'\n        data={data}\n        innerRadius={innerRadius}\n        outerRadius={outerRadius}\n        cx='50%'\n        cy='50%'\n        startAngle={90}\n        endAngle={-270}\n      >\n        {data.map((element, index) => <Cell key={element.name} fill={colorScale.getColorFor(data[index].value)} />)}\n      </Pie>\n    </PieChart>\n  )\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport d3 from 'd3'\nimport classNames from 'classnames'\n\nconst defaultNameRenderer = (name, x, y, fontSize, refFunc, onRowClick) => (\n  <text\n    ref={refFunc}\n    className=\"rad-row-name-text\"\n    x={x}\n    y={y}\n    fontSize={fontSize}\n    alignmentBaseline=\"hanging\"\n    onClick={() => {onRowClick(name)}}\n  >\n    <title>{name}</title>\n    {name}\n  </text>\n)\n\nexport default class RadRow extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showEllipses: false\n    }\n  }\n\n  componentDidMount() {\n    const textWidth = this.nameTextElement.getBoundingClientRect().width\n    if (textWidth > this.availableWidthForName() && !this.state.showEllipses) {\n      this.setState({ showEllipses: true })\n    }\n  }\n\n  componentDidUpdate() {\n    const textWidth = this.nameTextElement.getBoundingClientRect().width\n    if (textWidth > this.availableWidthForName() && !this.state.showEllipses) {\n      this.setState({ showEllipses: true })\n    } else if (textWidth < this.availableWidthForName() && this.state.showEllipses) {\n      this.setState({ showEllipses: false })\n    }\n  }\n\n  availableWidthForName() {\n    return (this.props.chartWidth - 53) - this.widthForCircle()\n  }\n\n  widthForCircle() {\n    return (this.getCircleRadius() * 2) + this.props.circlePaddingRight\n  }\n\n  heightForText() {\n    return this.props.rowHeight / 3\n  }\n\n  getCircleRadius() {\n    return this.heightForText() / 2\n  }\n\n  render() {\n    const { y, rowHeight, chartWidth, datum, data, xScale, nameRenderer, onRowClick } = this.props\n    let barWidth\n    const textValueClassNames = classNames('rad-row-value-text', { 'rad-row-negative': (datum.value < 0) })\n    if (datum.value < 0) {\n      barWidth = 0\n    } else {\n      barWidth = xScale(datum.value)\n    }\n    const barHeight = rowHeight / 6\n    const fontSize = this.heightForText()\n    const circleRadius = this.getCircleRadius()\n    const barY = y + (rowHeight / 3) + (rowHeight / 6)\n    const ellipsesXAdjustment = 2 // Move ellipsis slightly right so it has padding\n    const ellipses = (this.state.showEllipses) ?\n      (\n        <text\n          className={'rad-row-name-ellipses'}\n          x={chartWidth - this.props.spaceForValueText + ellipsesXAdjustment}\n          y={y}\n          fontSize={fontSize}\n          alignmentBaseline=\"hanging\"\n        >\n          <title>{datum.name}</title>\n          ...\n        </text>\n      ) :\n      ''\n\n    return (\n      <g className=\"rad-row\">\n        <circle\n          cx={0 + circleRadius}\n          cy={y + circleRadius}\n          r={circleRadius}\n          fill={this.props.color}\n        />\n        {nameRenderer(datum.name, this.widthForCircle(), y, fontSize, (textElement) => { this.nameTextElement = textElement }, onRowClick)}\n        <rect\n          className=\"rad-row-value-background\"\n          x={chartWidth - this.props.spaceForValueText}\n          y={y}\n          width={this.props.spaceForValueText}\n          height={rowHeight - barHeight}\n        />\n        {ellipses}\n        <text\n          className={textValueClassNames}\n          x={chartWidth}\n          y={y}\n          fontSize={fontSize}\n          textAnchor=\"end\"\n          alignmentBaseline=\"hanging\"\n        >\n          {datum.value}\n        </text>\n        <rect\n          className=\"rad-row-background\"\n          y={barY}\n          width={chartWidth}\n          height={barHeight}\n        />\n        <rect\n          className=\"rad-row-bar\"\n          y={barY}\n          width={barWidth}\n          height={barHeight}\n          fill={this.props.color}\n        />\n      </g>\n    )\n  }\n}\n\nRadRow.propTypes = {\n  y: PropTypes.number,\n  chartWidth: PropTypes.number,\n  rowHeight: PropTypes.number,\n  datum: PropTypes.shape({\n    name: PropTypes.string,\n    value: PropTypes.number\n  }),\n  data: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string,\n    value: PropTypes.number\n  })),\n  xScale: PropTypes.func,\n  color: PropTypes.string,\n  nameRenderer: PropTypes.func,\n  onRowClick: PropTypes.func\n}\n\nRadRow.defaultProps = {\n  circlePaddingRight: 8,\n  spaceForValueText: 54,\n  nameRenderer: defaultNameRenderer,\n  onRowClick: () => {console.log('row clicked')}\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport d3 from 'd3'\nimport DefaultRow from './DefaultRow.js'\n\nexport default class RowChart extends Component {\n  rowHeight() {\n    if (this.props.rowHeight) return this.props.rowHeight\n\n    return this.props.height / this.props.data.length\n  }\n\n  svgHeight() {\n    return this.rowHeight() * this.props.data.length\n  }\n\n  svgWidth() {\n    const scrollbarWidth = 18\n    if (this.svgHeight() >= this.props.height) return this.props.width - scrollbarWidth\n\n    return this.props.width\n  }\n\n  xScale() {\n    const maxValue = d3.max(this.props.data, d => d.value)\n    return d3.scale.linear()\n      .domain([0, maxValue])\n      .range([0, this.props.width])\n  }\n\n  render() {\n    const rowHeight = this.rowHeight()\n    const rows = this.props.data.map((d, i) => {\n      const y = rowHeight * i\n      const Row = this.props.row\n      return (\n        <Row\n          key={d.name}\n          y={y}\n          rowHeight={rowHeight}\n          chartWidth={this.svgWidth()}\n          datum={d}\n          data={this.props.data}\n          xScale={this.xScale()}\n          color={this.props.colorMapper(d.value)}\n          nameRenderer={this.props.nameRenderer}\n          onRowClick={this.props.onRowClick}\n        />\n      )\n    })\n\n    const containerStyles = {\n      width: this.props.width,\n      height: this.props.height,\n      overflow: 'auto'\n    }\n    return (\n      <div className={`row-chart ${this.props.className || ''}`} style={containerStyles}>\n        <svg width={this.svgWidth()} height={this.svgHeight()}>\n          {rows}\n        </svg>\n      </div>\n    )\n  }\n}\n\nRowChart.propTypes = {\n  className: PropTypes.string,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  data: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string,\n    value: PropTypes.number\n  })),\n  row: PropTypes.func,\n  rowHeight: PropTypes.number,\n  colorMapper: PropTypes.func,\n  nameRenderer: PropTypes.func,\n  onRowClick: PropTypes.func\n}\n\nRowChart.defaultProps = {\n  row: DefaultRow\n}\n","export { default } from './RowChart'\n","import React from 'react'\nimport RowChart from './RowChart'\nimport ColorScale from '../../util/ColorScale.js'\nimport CountUp from 'react-countup'\nimport Sizebox from 'react-sizebox'\nimport PieChart from './PieChart'\n\nexport default function({ data, bigNumber, colorPalette, title, groupTitle, valueTitle, onRowClick, className }) {\n  const colorScale = new ColorScale(data, colorPalette.colors, colorPalette.noDataColor)\n\n  return (\n    <div className={'breakdown-panel row ' + className}>\n      <div className='left-column column medium-5'>\n        <CountUp className='number-countup' start={0} end={bigNumber} duration={3} />\n        <div className='breakdown-title'>{title}</div>\n        <Sizebox className=\"pie-sizebox\">\n          <PieChart data={data} title={title} colorScale={colorScale} />\n        </Sizebox>\n      </div>\n      <div className='right-column column medium-10'>\n        <div className='breakdown-group-title'>By {groupTitle}</div>\n        <div className='breakdown-value-title'>{valueTitle}</div>\n        <Sizebox className=\"row-chart-sizebox\">\n          <RowChart\n            rowHeight={40}\n            data={data}\n            colorMapper={(value) => colorScale.getColorFor(value)}\n            onRowClick={onRowClick}\n          />\n        </Sizebox>\n      </div>\n    </div>\n  )\n}\n","import ColorScale from '../util/ColorScale'\n\n// Choropleth adapted from http://techslides.com/demos/d3/worldmap-template.html\n// Zoom buttons adapted from http://bl.ocks.org/linssen/7352810\nexport default function(parentSelector) {\n  const chart = {}\n\n  d3.select(window).on(\"resize\", throttle);\n\n  var zoom = d3.behavior.zoom()\n      .scaleExtent([1, 9])\n      .on(\"zoom\", zoomAndPan);\n\n  var width = document.getElementById('projects-choropleth').offsetWidth;\n  var parentHeight = document.getElementById('projects-choropleth').offsetHeight\n  var height = width / 2;\n  let center = [width/2, height / 2]\n\n  var projection,path,svg,g;\n  let _topojson, _data, _colorScale\n  let _colorPalette = { colors: ['green', 'red', 'blue'], noDataColor: '#bbb' }\n  let _colorMapper = (value) => '#ccc'\n  let _valueAccessor = (datum) => (datum !== undefined) ? datum.value : undefined\n  let _tooltipContent = (datum) => `${datum.name}<br/>${datum.value}`\n  let _numberFormatter = (value) => Math.round(value)\n\n  var tooltip = d3.select(\"#projects-choropleth\").append(\"div\").attr(\"class\", \"tooltip hidden\");\n\n  setup(width,height);\n\n  function setup(width,height){\n    projection = d3.geo.mercator()\n      .translate([(width/2), (height/2)])\n      .scale( width / 2 / Math.PI);\n\n    path = d3.geo.path().projection(projection);\n\n    svg = d3.select(\"#projects-choropleth\").append(\"svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .call(zoom)\n        .on(\"wheel.zoom\", null) // Don't zoom with mouse scroll\n        //.on(\"click\", click)\n        .append(\"g\");\n\n    g = svg.append(\"g\")\n          .on(\"click\", click);\n  }\n\n  function setupColorMapper() {\n    _colorScale = new ColorScale(_data, _colorPalette.colors, _colorPalette.noDataColor)\n    _colorMapper = (value) => _colorScale.getColorFor(value)\n  }\n\n  function addLegend() {\n    const legendBottomOffset = (height - parentHeight > 0) ? parentHeight - 200: height - 200\n    const legend = svg.append('g')\n      .classed('legend', true)\n      .attr('transform', `translate(${20}, ${legendBottomOffset})`)\n    legend.append('rect')\n      .classed('background', true)\n      .attr('width', 170)\n      .attr('height', 180)\n      .attr('fill', 'white')\n    \n    legend.append('text')\n      .classed('legend-title', true)\n      .text('Legend')\n      .attr('alignment-baseline', 'hanging')\n      .attr('y', 10)\n      .attr('x', 10)\n    \n    const keyContainer = legend.append('g')\n      .classed('key-container', true)\n      .attr('transform', `translate(${10}, 35)`)\n    \n    const legendColors = _colorScale.scale.range().slice(0).reverse()\n    legendColors.push(_colorScale.noDataColor)\n    const keyRow = keyContainer.selectAll('g')\n      .data(legendColors)\n      .enter()\n      .append('g')\n      .attr('transform', (d, i) => `translate(${0}, ${i * 20})`)\n\n    keyRow.append('rect')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('height', 15)\n      .attr('width', 15)\n      .attr('fill', (color) => color)\n    \n    keyRow.append('text')\n      .text((color) => getLegendValueRange(color))\n      .classed('key-text', true)\n      .attr('alignment-baseline', 'hanging')\n      .attr('x', 25)\n      .attr('y', 0)\n  }\n\n  function getLegendValueRange(color) {\n    const colorValueRange = _colorScale.scale.invertExtent\n    if(!colorValueRange(color)[0]) return '0 Solutions'\n    return `${_numberFormatter(Math.ceil(colorValueRange(color)[0]))} to ${_numberFormatter(Math.floor(colorValueRange(color)[1]))} Solutions`\n  }\n\n  chart.numberFormatter = function (_) {\n    _numberFormatter = _\n    return chart\n  }\n\n  chart.colorPalette = function(_) {\n    _colorPalette = _\n    if(_data !== undefined) setupColorMapper()\n    return chart\n  }\n\n  chart.topojson = function (_) {\n    _topojson = _\n    return chart\n  }\n\n  chart.data = function (_) {\n    _data = _\n    return chart\n  }\n\n  chart.tooltipContent = function(_) {\n    _tooltipContent = _\n    return chart\n  }\n\n  function getDatum(key) {\n    const datum = _data.find((d) => d.name === key)\n    if(!datum) {\n      const geoDatum = _topojson.find((d) => d.id === key)\n      if(!geoDatum) {\n        return{ noDataFound: true, noGeoDataFound: true, name: key }\n      }\n      return Object.assign({ noDataFound: true }, { geoData: geoDatum })\n    }\n    return Object.assign(datum, { geoData: _topojson.find((d) => d.id === key)})\n  }\n\n  function getDataValue(key) {\n    return _valueAccessor(getDatum(key))\n  }\n\n  chart.draw = function () {\n    setupColorMapper()\n    addLegend()\n    var country = g.selectAll(\".country\").data(_topojson);\n\n    country.enter().insert(\"path\")\n        .attr(\"class\", \"country\")\n        .attr(\"d\", path)\n        .attr(\"id\", function(d,i) { return d.id; })\n        .attr(\"title\", function(d,i) { return d.properties.name; })\n        .style(\"fill\", function(d, i) { return _colorMapper(getDataValue(d.id)); });\n    d3.selectAll(\".country\").style(\"stroke-width\", .5 / zoom.scale());\n\n    //offsets for tooltips\n    var offsetL = document.getElementById('projects-choropleth').offsetLeft+20;\n    var offsetT = document.getElementById('projects-choropleth').offsetTop+10;\n\n    //tooltips\n    country\n      .on(\"mousemove\", function(d,i) {\n\n        var mouse = d3.mouse(svg.node()).map( function(d) { return parseInt(d); } );\n\n        tooltip.classed(\"hidden\", false)\n              .attr(\"style\", \"left:\"+(mouse[0]+offsetL)+\"px;top:\"+(mouse[1]+offsetT)+\"px\")\n              .html(_tooltipContent(getDatum(d.id)));\n\n        })\n        .on(\"mouseout\",  function(d,i) {\n          tooltip.classed(\"hidden\", true);\n        }); \n\n  }\n\n  function redraw() {\n    width = document.getElementById('projects-choropleth').offsetWidth;\n    height = width / 2;\n    d3.select('svg').remove();\n    setup(width,height);\n    chart.draw(_topojson);\n  }\n\n  function zoomAndPan(zoomFromButton) {\n    if(!zoomFromButton) {\n      var t = d3.event.translate;\n      var s = d3.event.scale; \n      var h = height/4;\n\n      t[0] = Math.min(\n        (width/height)  * (s - 1), \n        Math.max( width * (1 - s), t[0] )\n      );\n\n      t[1] = Math.min(\n        h * (s - 1) + h * s, \n        Math.max(height  * (1 - s) - h * s, t[1])\n      );\n\n      zoom.translate(t);\n      g.attr(\"transform\", \"translate(\" + t + \")scale(\" + s + \")\");\n    }\n\n    \n    g.attr(\"transform\", \"translate(\" + zoom.translate() + \")scale(\" + zoom.scale() + \")\");\n    //adjust the country hover stroke width based on zoom level\n    d3.selectAll(\".country\").style(\"stroke-width\", .5 / zoom.scale());\n\n  }\n\n  var throttleTimer;\n  function throttle() {\n    window.clearTimeout(throttleTimer);\n      throttleTimer = window.setTimeout(function() {\n        redraw();\n      }, 200);\n  }\n\n  //geo translation on mouse click in map\n  function click() {\n    var latlon = projection.invert(d3.mouse(this));\n  }\n\n  //function to add points and text to the map (used in plotting capitals)\n  function addpoint(lon,lat,text) {\n\n    var gpoint = g.append(\"g\").attr(\"class\", \"gpoint\");\n    var x = projection([lon,lat])[0];\n    var y = projection([lon,lat])[1];\n\n    gpoint.append(\"svg:circle\")\n          .attr(\"cx\", x)\n          .attr(\"cy\", y)\n          .attr(\"class\",\"point\")\n          .attr(\"r\", 1.5);\n\n    //conditional in case a point has no associated text\n    if(text.length>0){\n\n      gpoint.append(\"text\")\n            .attr(\"x\", x+2)\n            .attr(\"y\", y+2)\n            .attr(\"class\",\"text\")\n            .text(text);\n    }\n\n  }\n\n  // ZOOM BUTTON LOGIC ***********\n  function interpolateZoom (translate, scale) {\n      var self = this;\n      return d3.transition().duration(350).tween(\"zoom\", function () {\n          var iTranslate = d3.interpolate(zoom.translate(), translate),\n              iScale = d3.interpolate(zoom.scale(), scale);\n          return function (t) {\n              zoom\n                  .scale(iScale(t))\n                  .translate(iTranslate(t));\n              zoomAndPan(true);\n          };\n      });\n  }\n\n  function zoomClick() {\n      var clicked = d3.event.target,\n          direction = 1,\n          factor = 0.2,\n          target_zoom = 1,\n          center = [width / 2, height / 2],\n          extent = zoom.scaleExtent(),\n          translate = zoom.translate(),\n          translate0 = [],\n          l = [],\n          view = {x: translate[0], y: translate[1], k: zoom.scale()};\n\n      d3.event.preventDefault();\n      direction = (this.id === 'zoom-in') ? 1 : -1;\n      target_zoom = zoom.scale() * (1 + factor * direction);\n\n      if (target_zoom < extent[0] || target_zoom > extent[1]) { return false; }\n\n      translate0 = [(center[0] - view.x) / view.k, (center[1] - view.y) / view.k];\n      view.k = target_zoom;\n      l = [translate0[0] * view.k + view.x, translate0[1] * view.k + view.y];\n\n      view.x += center[0] - l[0];\n      view.y += center[1] - l[1];\n\n      interpolateZoom([view.x, view.y], view.k);\n  }\n\n  function resetZoom() {\n    interpolateZoom([0, 0], 1)\n  }\n\n  d3.selectAll('#projects-choropleth .zoom-button').on('click', zoomClick)\n  d3.select('#projects-choropleth .reset-button').on('click', resetZoom)\n  return chart\n}\n","import React from 'react'\n\nexport default function({ currentPage, totalPages, onPrevious, onNext }) {\n  return (\n    <div className=\"page-selector column small-8 medium-6 large-6\">\n      <div className=\"row\">\n        <div className=\"page-prev-button column small-4\" onClick={onPrevious}><span className=\"fa fa-angle-left\" /></div>\n        <div className=\"current-page column small-8\">{currentPage} of {totalPages}</div>\n        <div className=\"page-next-button column small-4\" onClick={onNext}><span className=\"fa fa-angle-right\" /></div>\n      </div>\n    </div>\n  )\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Lunr from 'lunr'\nimport PageSelector from './PageSelector'\nimport { SEARCH_FIELDS } from './SearchFields'\nimport { REGION_COLUMN_NAME, PRACTICE_AREA_COLUMN_NAMES, PRACTICE_AREA_COLUMN_NAME, PROJECT_TITLE_COLUMN_NAME, SEARCH_REFERENCE_ID_COLUMN_NAME } from '../../ColumnNames'\nimport PracticeAreaExists from '../../util/PracticeAreaExists'\n\nexport default class ProjectSearch extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      searchInput: '',\n      totalResults: [],\n      pagedResults: [],\n      currentPage: 1,\n      totalNumberOfPages: 0,\n      sortBy: { columnName: 'Project Title', order: 'asc' }\n    }\n\n    this.searchIndex = Lunr(function() {\n      this.ref(props.searchReferenceField)\n      Object.values(props.searchFields).forEach((searchField) => {\n        const fieldName = searchField.name\n        const fieldWeight = searchField.weight\n        this.field(fieldName, fieldWeight)\n      })\n      this.pipeline.remove(Lunr.stemmer)\n\n      props.projects.forEach((project) => {\n        this.add(project)\n      })\n    })\n\n    // Give 'this' scope to functions\n    this.handleChange = this.handleChange.bind(this)\n    this.getTotalResults = this.getTotalResults.bind(this)\n    this.getPagedData = this.getPagedData.bind(this)\n    this.goToNextPage = this.goToNextPage.bind(this)\n    this.goToPreviousPage = this.goToPreviousPage.bind(this)\n    this.getTotalNumberOfPages = this.getTotalNumberOfPages.bind(this)\n    this.setSort = this.setSort.bind(this)\n  }\n\n  componentWillMount() {\n    const totalResults = this.getTotalResults(this.state.searchInput, this.state.sortBy)\n    const pagedResults = this.getPagedData(totalResults, this.state.currentPage)\n    // Set the initial results set\n    this.setState({ \n      totalResults,\n      pagedResults,\n      totalNumberOfPages: this.getTotalNumberOfPages(totalResults, this.props.showCount)\n    })\n  }\n\n  getPracticeAreasMarkup(record) {\n    const practiceAreaObjects = Object.values(PRACTICE_AREA_COLUMN_NAMES).map((pa) => pa)\n    const practiceAreasForProject = practiceAreaObjects.filter((pa) => {\n      return PracticeAreaExists(pa, record)\n    })\n    let markup = practiceAreasForProject\n      .map((practiceArea, i) => {\n        const separator = (i + 1 < practiceAreasForProject.length) ? ' / ' : ''\n\n        return (\n          <span key={practiceArea['key']} className='subtitle'>{`${practiceArea['displayName']}${separator}`}</span>\n        )\n      })\n\n    if(markup.length === 0) return <span>Practice Area Unavailable</span>\n    return markup\n  }\n\n  getPagedData(data, pageNumber) {\n    if(data.length <= this.props.showCount) {\n      return data\n    }\n\n    const zeroedPageIndex = pageNumber - 1\n    const startIndex = this.props.showCount * zeroedPageIndex\n    const endIndex = startIndex + this.props.showCount\n    return data.slice(startIndex, endIndex)\n  }\n\n  // Note this function is for sorting strings\n  generateSortFunc(sortColumn, sortOrder) {\n    if(sortOrder == 'asc') {\n      return function(a, b) {\n        return a[sortColumn].localeCompare(b[sortColumn])\n      }\n    } else {\n      return function(a, b) {\n        return b[sortColumn].localeCompare(a[sortColumn])\n      }\n    }\n  }\n\n  getTotalResults(searchInput, sortBy) {\n    const resultsRefs = this.searchIndex.search(`*${searchInput}*`).map((result) => result.ref)\n    const resultsRecords = resultsRefs.map((ref) => {\n      return this.props.projects.find((project) => project[this.props.searchReferenceField] === Number(ref))\n    })\n    .sort(this.generateSortFunc(sortBy.columnName, sortBy.order))\n    return resultsRecords\n  }\n\n  resultsMarkup(resultsRecords) {\n    const resultsMarkup = resultsRecords.map((record) => {\n      return (\n        <li key={record[SEARCH_REFERENCE_ID_COLUMN_NAME]}>\n          <div className=\"column small-16\">\n            <div className=\"row\">\n              <div className=\"column\">\n                <div className=\"project-category\">{this.getPracticeAreasMarkup(record)}</div>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"column small-8 medium-10\">\n                <a href={`${record['url']}`} className=\"project-title\">{record[PROJECT_TITLE_COLUMN_NAME] || \"Project Title Unavailable\"}</a>\n              </div>\n              <div className=\"column small-8 medium-6\">\n                {record[REGION_COLUMN_NAME] || \"Region Unavailable\"}\n              </div>\n            </div>\n          </div>\n        </li>\n      )\n    })\n    return resultsMarkup\n  }\n\n  handleChange(event) {\n    const searchInput = event.target.value\n    const totalResults = this.getTotalResults(searchInput, this.state.sortBy)\n    let currentPage = this.state.currentPage\n    const totalNumberOfPages = this.getTotalNumberOfPages(totalResults, this.props.showCount)\n    // If the user is searching, then make sure that the current page number does not go over the new totalNumberOfPages for this new totalResults set\n    if(currentPage > totalNumberOfPages) currentPage = totalNumberOfPages\n    // If the current page was 0, but now there are results again and totalNumberOfPages is not zero anymore\n    // Then move the user to the first page\n    if(currentPage === 0 && totalNumberOfPages > 0) currentPage = 1\n    const pagedResults = this.getPagedData(totalResults, currentPage)\n\n    this.setState({ \n      searchInput,\n      totalResults,\n      pagedResults,\n      totalNumberOfPages,\n      currentPage\n    })\n  }\n\n  goToPreviousPage() {\n    const prevPageExists = (this.state.currentPage > 1)\n    if(prevPageExists) {\n      const updatedCurrentPage = this.state.currentPage - 1\n      const pagedResults = this.getPagedData(this.state.totalResults, updatedCurrentPage)\n      this.setState({ \n        currentPage: updatedCurrentPage,\n        pagedResults\n      })\n    }\n  }\n\n  getTotalNumberOfPages(data, pageCapacity) {\n    return Math.ceil(data.length / pageCapacity)\n  }\n\n  goToNextPage() {\n    const nextPageExists = (this.state.currentPage < this.getTotalNumberOfPages(this.state.totalResults, this.props.showCount))\n    if(nextPageExists) {\n      const updatedCurrentPage = this.state.currentPage + 1\n      const pagedResults = this.getPagedData(this.state.totalResults, updatedCurrentPage)\n      this.setState({ \n        currentPage: updatedCurrentPage,\n        pagedResults\n      })\n    }\n  }\n\n  setSort(sortColumn) {\n    if(this.state.sortBy.order === 'asc') {\n      const sortBy = { columnName: sortColumn, order: 'desc' }\n      const totalResults = this.getTotalResults(this.state.searchInput, sortBy)\n      const pagedResults = this.getPagedData(totalResults, this.state.currentPage)\n      this.setState({\n        sortBy,\n        totalResults,\n        pagedResults\n      })\n    } else if(this.state.sortBy.order === 'desc') {\n      const sortBy = { columnName: sortColumn, order: 'asc' }\n      const totalResults = this.getTotalResults(this.state.searchInput, sortBy)\n      const pagedResults = this.getPagedData(totalResults, this.state.currentPage)\n      this.setState({\n        sortBy,\n        totalResults,\n        pagedResults\n      })\n    }\n  }\n\n  getSortArrow(columnName) {\n    const sortBy = this.state.sortBy\n    if(sortBy.columnName !== columnName) {\n      return ''\n    } else {\n      if(sortBy.order === 'asc') {\n        return <span className=\"sort-caret fa fa-caret-up\"></span>\n      } else if(sortBy.order === 'desc') {\n        return <span className=\"sort-caret fa fa-caret-down\"></span>\n      }\n    }\n  }\n\n  render() {\n    let searchResultsMarkup = this.resultsMarkup(this.state.pagedResults)\n    if(searchResultsMarkup.length === 0) searchResultsMarkup = <span>No Projects found</span>\n\n    return (\n      <div>\n        <div className=\"background-lighterBlue\">\n          <div className=\"row row--gutters column projects-search\">\n            <h2>Search our project database</h2>\n            <label>\n              <span className=\"sr-only\">Search Projects</span>\n              <span className=\"fa fa-search\" aria-hidden=\"true\"></span>\n              <input type=\"text\" placeholder=\"Search Projects\" value={this.state.value} onChange={this.handleChange}/>\n            </label>\n          </div>\n        </div>\n        <div className=\"row row--gutters column projects-list\">\n          <div className=\"column background-lighterBlue project-results-header\">\n            <div className=\"row\">\n              <div className=\"column small-8 medium-10\"><a onClick={() => this.setSort('Project Title')}>Project{this.getSortArrow('Project Title')}</a></div>\n              <div className=\"column small-8 medium-6\"><a onClick={() => this.setSort('Region')}>Region{this.getSortArrow('Region')}</a></div>\n            </div>\n          </div>\n          <div className=\"overflow-container\">\n            <ul>\n              {searchResultsMarkup}\n            </ul>\n          </div>\n          <div className=\"row\">\n            <PageSelector currentPage={this.state.currentPage} totalPages={this.getTotalNumberOfPages(this.state.totalResults, this.props.showCount)} onPrevious={this.goToPreviousPage} onNext={this.goToNextPage} />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nProjectSearch.propTypes = {\n  projects: PropTypes.arrayOf(PropTypes.object),\n  searchReferenceField: PropTypes.string,\n  showCount: PropTypes.number\n}\n\nProjectSearch.defaultProps = {\n  searchReferenceField: SEARCH_REFERENCE_ID_COLUMN_NAME,\n  searchFields: SEARCH_FIELDS,\n  showCount: 10\n}\n","import { COUNTRY_COLUMN_NAME, PROJECT_TITLE_COLUMN_NAME, BRIEF_DESCRIPTION_COLUMN_NAME, REGION_COLUMN_NAME } from '../../ColumnNames'\n\nconst SEARCH_FIELDS = {\n  PROJECT_TITLE: { name: PROJECT_TITLE_COLUMN_NAME, weight: 100 },\n  REGION: { name: REGION_COLUMN_NAME, weight: 50}\n}\n\nexport { SEARCH_FIELDS }\n","export { default } from './ProjectSearch'\n","import React, { Component } from 'react'\nimport { BarChart, Bar, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, Brush } from 'recharts'\nimport lodash from 'lodash'\nimport { reduceSum } from '../util/Reduce'\nimport { PRACTICE_AREAS } from '../ColumnNames'\nimport d3 from 'd3'\n\nconst sortStringsAsc = (a, b) => {\n  const aLower = a.toLowerCase()\n  const bLower = b.toLowerCase()\n  if(aLower < bLower) return -1\n  if(aLower > bLower) return 1\n  return 0\n}\n\nconst addWhiteTopBorders = () => {\n  d3.selectAll('.recharts-bar-rectangle path').attr('stroke-dasharray', function(d) { \n    var node = d3.select(this); \n    var width = node.attr('width');\n    var height = node.attr('height');\n    var topBorder = width;\n    var emptyBorder = width + (2 * height);\n    var dashArray = width + ',' + emptyBorder;\n    return dashArray\n  })\n  .attr('stroke', 'white')\n  .attr('stroke-width', '2px')\n}\n\nconst TooltipContent = function({ active, type, payload, label, xAxisDataKey, colorMapper, tooltipValueFormatter, showTotal }) {\n  if(!active) return null\n  const hoverData = payload[0].payload\n  const xAxisValue = hoverData[xAxisDataKey]\n  const stackData = Object.keys(hoverData).sort(sortStringsAsc)\n    .filter((key) => key !== xAxisDataKey)\n    .filter((key) => {\n      if (!showTotal) {\n        return key !== 'Total'\n      }\n      return key === 'Total'\n    })\n    .map((stackDataName) => {\n      return { \n        name: stackDataName,\n        value: hoverData[stackDataName],\n        color: colorMapper[stackDataName]\n      }\n    })\n    .filter((slice) => {\n      \n      return slice.value > 0\n    })\n\n  const stackContent = stackData.map((slice) => {\n    return (\n      <div key={`${xAxisValue}-${slice.name}`} className='stack-slice-content'>\n        <svg width={20} height={20}><circle cx={10} cy={10} r={10} fill={slice.color} /></svg>\n        <span className='stack-slice-name'>{slice.name}</span>\n        <div className='stack-slice-value'>{tooltipValueFormatter(slice.value)}</div>\n      </div>\n    )\n  })\n\n  return (\n    <div className='tt-content' style={{ width: 350, height: 'auto' }}>\n      <div className='tt-title'>{xAxisValue}</div>\n      <div className='tt-label'>{hoverData.name}</div>\n      {stackContent}\n    </div>\n  )\n}\n\nexport default class StackedBarChart extends Component {\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n    addWhiteTopBorders()\n  }\n\n  componentDidUpdate() {\n    addWhiteTopBorders()\n  }\n\n  render() {\n    const { width, height, data, xAxisDataKey, stackDataKey, colorPalette, valueKey = 'value', tickFormatter, tooltipValueFormatter, showTotal = false } = this.props\n    const colorsDarkToLight = colorPalette.colors.slice(0).reverse() // Clone then reverse\n    const xGrouping = lodash.groupBy(data, xAxisDataKey)\n    const xGroupingWithSums = lodash.mapValues(xGrouping, (collectionForXGroup) => {\n      const stackGrouping = lodash.groupBy(collectionForXGroup, stackDataKey)\n      const stackGroupingWithSums = reduceSum(stackGrouping, valueKey)\n      return stackGroupingWithSums\n    })\n    const xGroupingSumsTotalled = lodash.mapValues(xGroupingWithSums, (sumObject) => {\n      const total = Object.keys(sumObject).reduce((accumulator, sumKey) => accumulator += sumObject[sumKey], 0)\n      return total\n    })\n    const xAxisGroupedByTotals = lodash.invert(xGroupingSumsTotalled)\n    const xAxisDataKeyForSorting = xAxisDataKey + '-sort-key'\n    const flattenedGroupings = Object.entries(xGroupingWithSums).map(([xName, stackGrouping]) => Object.assign({ [xAxisDataKey]: xName }, stackGrouping, { Total: xGroupingSumsTotalled[xName]})).sort((a, b) => b.Total - a.Total)\n\n    const stackDataNamesAsc = lodash.uniqBy(data, stackDataKey)\n    .map((d) => d[stackDataKey])\n    .sort(sortStringsAsc)\n    const colorMapper = {}\n    stackDataNamesAsc.forEach((name, index) => colorMapper[name] = colorsDarkToLight[index])\n    const stackDataNamesDesc = stackDataNamesAsc.slice(0).reverse() // Clone and then reverse\n    const stackedBar = stackDataNamesDesc.map((name, stackIndex) => {\n      return (\n        <Bar key={`bar-${name}`} dataKey={name} stackId='samestack' isAnimationActive={false} >\n          {\n            flattenedGroupings.map((element, index) => (\n              <Cell \n                key={`stacked-bar-${element.region}-${index}`} \n                fill={colorMapper[name]}\n              />\n            ))\n          }\n        </Bar>\n      )\n    })\n    const legendData = stackDataNamesAsc.map((name, index) => ({ id: name, value: name, color: colorMapper[name] }))\n\n    return (\n      <BarChart width={width} height={height} data={flattenedGroupings} margin={{top: 20, right: 0, bottom: 0, left: -20}}>\n        <CartesianGrid vertical={false} strokeDasharray=\"1 1\" strokeWidth={2} />\n        <XAxis dataKey={xAxisDataKey} interval={0}/>\n        <YAxis tickFormatter={tickFormatter} />\n        <Tooltip \n          cursor={{ stroke: '#ddd', strokeWidth: 1, fill: 'none' }} \n          content={<TooltipContent colorMapper={colorMapper} xAxisDataKey={xAxisDataKey} tooltipValueFormatter={tooltipValueFormatter} showTotal={showTotal} />} \n        />\n        <Legend iconType='circle' payload={legendData} />\n      {stackedBar}\n      </BarChart>\n    )\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport qdFormatters from 'qd-formatters'\nimport CountUp from 'react-countup'\nimport Sizebox from 'react-sizebox'\nimport BreakDownPanel from './components/BreakdownPanel'\nimport StackedBarChart from './components/StackedBarChart'\nimport ColorPalette from './util/ColorPalette'\nimport ColorScale from './util/ColorScale'\nimport d3 from 'd3'\nimport lodash from 'lodash'\nimport * as topojson from 'topojson'\nimport { PRACTICE_AREA_COLUMN_NAMES, PRACTICE_AREA_COLUMN_NAME, COUNTRY_COLUMN_NAME, REGION_COLUMN_NAME, PARTNER_COLUMN_NAME, CONTRACT_VALUE_COLUMN_NAME, SEARCH_REFERENCE_ID_COLUMN_NAME, ISO_3_COlUMN_NAME } from './ColumnNames'\nimport { reduceSum, reduceCount, reduceCountIncludeExtraData } from './util/Reduce'\nimport D3Choropleth from './components/D3Choropleth'\nimport ProjectSearch from './components/ProjectSearch'\nimport PracticeAreaExists from './util/PracticeAreaExists'\nimport slugify from 'slugify'\n\nconst formatters = qdFormatters(d3)\nif(process.env.NODE_ENV === \"production\") {\n  console.warn = () => {}\n}\n\n// Make sure each record only has one practice area\n// We need this in order to group by practice area because the original data can have multiple practice areas per record\nconst denormalizePracticeAreas = (data) => {\n  let denormalizedData = []\n  const practiceAreas = Object.values(PRACTICE_AREA_COLUMN_NAMES)\n  practiceAreas.forEach((practiceArea) => {\n    const dataFilteredByPracticeArea = data.filter(project => {\n      return PracticeAreaExists(practiceArea, project)\n    })\n    const dataWithSinglePracticeArea = dataFilteredByPracticeArea.map(project => Object.assign({}, project, { denormalizedPracticeArea: practiceArea['displayName']}))\n    denormalizedData = denormalizedData.concat(dataWithSinglePracticeArea)\n  })\n  let nonePracticeAreas = data.filter(project => {\n    var foundSomePracticeArea = practiceAreas.some((practiceArea) => {\n      return PracticeAreaExists(practiceArea, project)\n    })\n    return !foundSomePracticeArea\n  })\n  .map(project => Object.assign({}, project, { denormalizedPracticeArea: 'None' }))\n\n  return denormalizedData // .concat(nonePracticeAreas) // Unecessary to include None as a practice area\n}\n\nconst chartDataFormat = (groupedValues) => {\n  const nameValueArray = Object.entries(groupedValues).map(([name, value]) => ({ name, value }))\n  return lodash.sortBy(nameValueArray, ['value']).slice(0).reverse()\n}\nconst choroplethDataFormat = (groupedValues) => {\n  const flattenedArray = []\n  Object.keys(groupedValues).forEach((iso3Code) => {\n    const country = { name: iso3Code, value: groupedValues[iso3Code] }\n    flattenedArray.push(country)\n  })\n  return flattenedArray\n}\nconst choroplethTooltipFunc = (datum) => {\n  if(datum.noDataFound) {\n    if(datum.noGeoDataFound) {\n      return `No data found for Country`\n    }\n    return `${datum.geoData.properties.name}<br/>0 solutions`\n  }\n  return`${datum.geoData.properties.name}<br/>${datum.value} solutions`\n}\n\n// A Project has multiple solutions\n// A solution is a Project in a country, eg: a Project in 3 countries is equivalent to 3 solutions\nconst denormalizeProjectsIntoSolutions = (projects) => {\n  const solutions = []\n  projects.forEach((p) => {\n    if(p[ISO_3_COlUMN_NAME].length === 0) {\n      solutions.push(p)\n    } else {\n      p[ISO_3_COlUMN_NAME].forEach((isoCode) => {\n        const solution = Object.assign({}, p, { [ISO_3_COlUMN_NAME]: isoCode })\n        solutions.push(solution)\n      })\n    }\n  })\n\n  return solutions\n}\n\nconst goToPracticeArea = (name) => {\n  window.location.href = `/our-practices/${slugify(name)}`\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const projects = JEKYLL_DATA.projectsData.map((d, i) => {\n    return Object.assign({}, d, { [SEARCH_REFERENCE_ID_COLUMN_NAME]: i })\n  })//.filter((p) => p[REGION_COLUMN_NAME].indexOf('Latin') === -1) // Remove latin america to see how stacked bar chart looks\n  const solutions = denormalizeProjectsIntoSolutions(projects) \n  const totalSolutions = solutions.length\n  const totalPartners = Object.keys(lodash.groupBy(projects, PARTNER_COLUMN_NAME)).length\n  const totalMoney = formatters.bigCurrencyFormat(projects.reduce((acc, next) => {\n    // Important that we iterate over 'projects' and not 'solutions', solutions would be double counting money\n    const contractValue = Number(next[CONTRACT_VALUE_COLUMN_NAME])\n    if(isNaN(contractValue)) return acc\n    return acc + Number(next[CONTRACT_VALUE_COLUMN_NAME])\n  }, 0))\n  const solutionsGroupedByCountry = lodash.groupBy(solutions, ISO_3_COlUMN_NAME)\n  const totalCountries = Object.keys(solutionsGroupedByCountry).filter((isoCode) => isoCode !== \"\").length // Don't include countries that are unknown or global\n  const projectsGroupedByRegion = lodash.groupBy(projects, REGION_COLUMN_NAME)\n  const solutionsGroupedByRegion = lodash.groupBy(solutions, REGION_COLUMN_NAME)\n  const countriesInRegions = lodash.mapValues(solutionsGroupedByRegion, (sgbr) => lodash.uniqBy(sgbr, ISO_3_COlUMN_NAME).length)\n  const projectsDenormalizedByPracticeArea = denormalizePracticeAreas(projects)\n  const solutionsDenormalizedByPracticeArea = denormalizePracticeAreas(solutions)\n  const projectsGroupedByPracticeArea = lodash.groupBy(projectsDenormalizedByPracticeArea, 'denormalizedPracticeArea')\n  const solutionsGroupedByPracticeArea = lodash.groupBy(solutionsDenormalizedByPracticeArea, 'denormalizedPracticeArea')\n  const solutionCountsForCountries = reduceCount(solutionsGroupedByCountry)\n\n  const choroplethData = choroplethDataFormat(solutionCountsForCountries)\n  const getCountryColor = (datum) => {\n    return ChoroplethColorScale.getColorFor(datum.value)\n  }\n  const ChoroplethColorScale = new ColorScale(choroplethData, ColorPalette.colors, ColorPalette.noDataColor)\n  d3.json(\"/assets/data/countries.topo.json\", function(error, world) {\n\n    const countriesTopo = topojson.feature(world, world.objects.countries).features;\n\n    const projectsChoropleth = D3Choropleth('projects-choropleth')\n      .topojson(countriesTopo)\n      .data(choroplethData)\n      .colorPalette(ColorPalette)\n      .tooltipContent(choroplethTooltipFunc)\n      .numberFormatter(formatters.numberFormat)\n      .draw()\n  });\n\n  const pbpaPanel = (\n    <BreakDownPanel\n      data={chartDataFormat(reduceCount(solutionsGroupedByPracticeArea))}\n      bigNumber={totalSolutions}\n      colorPalette={ColorPalette}\n      title='Solutions'\n      groupTitle='Practice Area'\n      valueTitle='Solutions'\n      onRowClick={goToPracticeArea}\n    />\n  )\n  const pbrPanel = (\n    <BreakDownPanel\n      data={chartDataFormat(countriesInRegions)}\n      bigNumber={totalCountries}\n      colorPalette={ColorPalette}\n      title='Countries'\n      groupTitle='Region'\n      valueTitle='Countries'\n    />\n  )\n\n  const stackedBarChart = (\n    <Sizebox className=\"stacked-bar-chart-sizebox\">\n      <StackedBarChart\n        data={projectsDenormalizedByPracticeArea}\n        xAxisDataKey={REGION_COLUMN_NAME}\n        stackDataKey={'denormalizedPracticeArea'}\n        colorPalette={ColorPalette}\n        valueKey={CONTRACT_VALUE_COLUMN_NAME}\n        tickFormatter={formatters.bigCurrencyFormat}\n        tooltipValueFormatter={formatters.currencyFormat}\n      />\n    </Sizebox>\n  )\n\n  ReactDOM.render(\n    <CountUp start={0} end={totalSolutions} duration={3} />,\n    document.getElementById('projects-count')\n  )\n\n  ReactDOM.render(\n    <CountUp start={0} end={totalCountries} duration={3} />,\n    document.getElementById('countries-count')\n  )\n\n  ReactDOM.render(\n    <CountUp start={0} end={totalPartners} duration={3} />,\n    document.getElementById('partners-count')\n  )\n\n  ReactDOM.render(\n    <span>{totalMoney}</span>,\n    document.getElementById('total-money')\n  )\n\n  ReactDOM.render(\n    pbpaPanel,\n    document.getElementById('projects-by-practice-area')\n  )\n\n  ReactDOM.render(\n    pbrPanel,\n    document.getElementById('projects-by-region')\n  )\n\n  ReactDOM.render(\n    stackedBarChart,\n    document.getElementById('contract-value')\n  )\n\n  ReactDOM.render(\n    <ProjectSearch projects={projects} />,\n    document.getElementById('project-search')\n  )\n\n})\n","// Dummy data\n\nconst projectsByPracticeArea = [\n  { name: 'Monitoring and Evaluation', value: 184 },\n  { name: 'Public Financial Management and Fiscal Sustainability', value: 123 },\n  { name: 'Knowledge Management and Data Analytics', value: 85 },\n  { name: 'Education, Gender and Youth', value: 37 },\n  { name: 'Energy and Environment', value: 12 },\n  { name: 'Security, Transparency, and Governence', value: 4 }\n]\n\nconst projectsByRegion = [\n  { name: 'East Asia & Oceania', value: 184 },\n  { name: 'Middle East & North Africa', value: 123 },\n  { name: 'South & Central Asia', value: 85 },\n  { name: 'Sub-Saharan Africa', value: 37 },\n  { name: 'Western Hemisphere', value: 12 },\n  { name: 'World', value: 9 }\n]\n\nconst practiceAreas = [\n  'Monitoring and Evaluation', \n  'Public Financial Management and Fiscal Sustainability', \n  'Knowledge Management and Data Analytics',\n  'Education, Gender and Youth',\n  'Energy and Environment',\n  'Security, Transparency, and Governance'\n]\n\nconst regionAndPracAreas = [\n  { region: 'East Asia & Oceania', practiceArea: 'Monitoring and Evaluation', value: 100 },\n  { region: 'East Asia & Oceania', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 300 },\n  { region: 'East Asia & Oceania', practiceArea: 'Knowledge Management and Data Analytics', value: 80 },\n  { region: 'East Asia & Oceania', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'East Asia & Oceania', practiceArea: 'Energy and Environment', value: 80 },\n  { region: 'East Asia & Oceania', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n\n  { region: 'Middle East & North Africa', practiceArea: 'Monitoring and Evaluation', value: 500 },\n  { region: 'Middle East & North Africa', practiceArea: 'Public Financial Management and Fiscal Sustainability', value:440 },\n  { region: 'Middle East & North Africa', practiceArea: 'Knowledge Management and Data Analytics', value: 400 },\n  { region: 'Middle East & North Africa', practiceArea: 'Education, Gender and Youth', value: 230 },\n  { region: 'Middle East & North Africa', practiceArea: 'Energy and Environment', value: 200 },\n  { region: 'Middle East & North Africa', practiceArea: 'Security, Transparency, and Governance', value: 80 },\n\n  { region: 'South & Central Asia', practiceArea: 'Monitoring and Evaluation', value: 550 },\n  { region: 'South & Central Asia', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 },\n  { region: 'South & Central Asia', practiceArea: 'Knowledge Management and Data Analytics', value: 350 },\n  { region: 'South & Central Asia', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'South & Central Asia', practiceArea: 'Energy and Environment', value: 100 },\n  { region: 'South & Central Asia', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n\n  { region: 'Sub-Saharan Africa', practiceArea: 'Monitoring and Evaluation', value: 550 },\n  { region: 'Sub-Saharan Africa', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 },\n  { region: 'Sub-Saharan Africa', practiceArea: 'Knowledge Management and Data Analytics', value: 350 },\n  { region: 'Sub-Saharan Africa', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'Sub-Saharan Africa', practiceArea: 'Energy and Environment', value: 100 },\n  { region: 'Sub-Saharan Africa', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n\n  { region: 'Western Hemisphere', practiceArea: 'Monitoring and Evaluation', value: 550 },\n  { region: 'Western Hemisphere', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 },\n  { region: 'Western Hemisphere', practiceArea: 'Knowledge Management and Data Analytics', value: 350 },\n  { region: 'Western Hemisphere', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'Western Hemisphere', practiceArea: 'Energy and Environment', value: 100 },\n  { region: 'Western Hemisphere', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n\n  { region: 'World', practiceArea: 'Monitoring and Evaluation', value: 550 },\n  { region: 'World', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 },\n  { region: 'World', practiceArea: 'Knowledge Management and Data Analytics', value: 350 },\n  { region: 'World', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'World', practiceArea: 'Energy and Environment', value: 100 },\n  { region: 'World', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n\n  { region: 'Others', practiceArea: 'Monitoring and Evaluation', value: 550 },\n  { region: 'Others', practiceArea: 'Public Financial Management and Fiscal Sustainability', value: 500 },\n  { region: 'Others', practiceArea: 'Knowledge Management and Data Analytics', value: 350 },\n  { region: 'Others', practiceArea: 'Education, Gender and Youth', value: 250 },\n  { region: 'Others', practiceArea: 'Energy and Environment', value: 100 },\n  { region: 'Others', practiceArea: 'Security, Transparency, and Governance', value: 50 },\n]\n\nexport { regionAndPracAreas, practiceAreas }\n","export default {\n  colors: [\n    '#62AFD1',\n    '#3D98C3',\n    '#297DA6',\n    '#1F5D7B',\n    '#173F53',\n    '#0E242F'\n  ],\n  noDataColor: '#cae0ea'\n}\n","import d3 from 'd3'\n\nexport default class ColorScale {\n  constructor(data, colors, noDataColor = \"#ddd\", valueAccessorFunc = (d) => d.value, scaleType = 'quantize', customDomain) {\n    this.data = data\n    this.colors = colors\n    this.noDataColor = noDataColor\n    this.valueAccessorFunc = valueAccessorFunc\n    this.scaleType = scaleType\n    this.customDomain = customDomain\n\n    // Setup the scale based on scale type\n    if(scaleType === 'quantize') { // Calculate the colors based on a linear quantize domain\n      this.scale = d3.scale.quantize()\n    }\n    else if(scaleType === \"quantile\") { // Calculate the colors by n domain sections(similar to quartiles but of n sections)\n      this.scale = d3.scale.quantile()\n    }\n    this.scale.domain(this.calculateDomain())\n      .range(colors)\n  }\n\n  calculateDomain() {\n    if(this.customDomain) {\n      return this.customDomain\n    }\n    else if(this.scaleType === 'quantize') {\n      // Standard min/max domain for linear quantize scale\n      return [d3.min(this.data, this.valueAccessorFunc), d3.max(this.data, this.valueAccessorFunc)]\n    }\n    else if(this.scaleType === 'quantile') {\n      // If the user didn't specify a list of quantiles using the customDomain\n      // then use the data itself as the quantiles\n      return this.data.map(this.valueAccessorFunc)\n    }\n    \n  }\n\n  setDomain() {\n    this.scale.domain(this.calculateDomain())\n  }\n\n  setData(data) {\n    this.data = data\n  }\n\n  getColorFor(value) {\n    if(value === undefined) {\n      return this.noDataColor\n    }\n    return this.scale(value)\n  }\n}\n","// Make practice area names nicer looking to read\n\nconst PracticeAreaTitle = (practiceArea) => {\n  return practiceArea.replace('Practice Area', '')\n}\n\nexport { PracticeAreaTitle }\n","import { PRACTICE_AREA_COLUMN_NAME } from '../ColumnNames'\n\nconst PracticeAreaExists = (practiceArea, project) => {\n  const practiceAreasForProject = project[PRACTICE_AREA_COLUMN_NAME]\n  return practiceAreasForProject.indexOf(practiceArea['displayName']) !== -1\n}\n\nexport default PracticeAreaExists\n","import lodash from 'lodash'\n\nconst reduceSum = (grouping, valueKey) => {\n  return lodash.mapValues(grouping, (recordsInGroup) => {\n    return recordsInGroup.reduce((accumulator, next) => {\n      const nextValue = Number(next[valueKey])\n      if(isNaN(nextValue)) {\n        console.warn('Tried to reduce with a non numeric value: ' + next[valueKey])\n        console.warn('Using zero as the value instead')\n        return accumulator += 0\n      }\n      return accumulator += Number(next[valueKey])\n    }, 0)\n  })\n}\n\nconst reduceCount = (grouping) => {\n  return lodash.mapValues(grouping, (recordsInGroup) => recordsInGroup.length)\n}\n\nconst reduceCountIncludeExtraData = (grouping, generateExtraData) => {\n  return lodash.mapValues(grouping, (recordsInGroup) => {\n    const extraData = generateExtraData(recordsInGroup)\n    const countWithExtra = Object.assign({ count: recordsInGroup.length }, extraData)\n    return countWithExtra\n  })\n}\nexport { reduceSum, reduceCount, reduceCountIncludeExtraData }\n","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}